---
title: Zabezpieczanie usług danych WCF
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: e09007e786772e838a9aaa76eb8ef7a3fe2b7cca
ms.sourcegitcommit: 7588136e355e10cbc2582f389c90c127363c02a5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 03/12/2020
ms.locfileid: "79174657"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="52ba3-102">Zabezpieczanie usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="52ba3-102">Securing WCF Data Services</span></span>
<span data-ttu-id="52ba3-103">W tym temacie opisano zagadnienia dotyczące zabezpieczeń, które są specyficzne dla tworzenia, wdrażania i uruchamiania usług danych WCF i aplikacji, które uzyskują dostęp do usług obsługujących protokół OData (Open Data Protocol).</span><span class="sxs-lookup"><span data-stu-id="52ba3-103">This topic describes security considerations that are specific to developing, deploying, and running WCF Data Services and applications that access services that support the Open Data Protocol (OData).</span></span> <span data-ttu-id="52ba3-104">Należy również postępować zgodnie z zaleceniami dotyczącymi tworzenia bezpiecznych aplikacji .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="52ba3-104">You should also follow recommendations for creating secure .NET Framework applications.</span></span>  
  
<span data-ttu-id="52ba3-105">Planując sposób zabezpieczania usługi OData opartej na usługach danych WCF, należy zająć się zarówno uwierzytelnianiem, procesem odnajdowania i weryfikacji tożsamości podmiotu zabezpieczeń, jak i autoryzacją, procesem określania, czy uwierzytelniony podmiot zabezpieczeń jest dostęp do żądanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="52ba3-105">When planning how to secure a WCF Data Services-based OData service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="52ba3-106">Należy również rozważyć, czy komunikat na być szyfrowany przy użyciu protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="52ba3-106">You should also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="52ba3-107">Uwierzytelnianie żądań klientów</span><span class="sxs-lookup"><span data-stu-id="52ba3-107">Authenticating Client Requests</span></span>  
<span data-ttu-id="52ba3-108">Usługi WCF Data Services nie implementuje wszelkiego rodzaju uwierzytelniania własnych, ale raczej opiera się na przepisach uwierzytelniania hosta usługi danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-108">WCF Data Services does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="52ba3-109">Oznacza to, że usługa zakłada, że każde żądanie, które otrzymuje, zostało już uwierzytelnione przez hosta sieciowego i że host prawidłowo zidentyfikował zasadę żądania za pośrednictwem interfejsów dostarczonych przez usługi WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="52ba3-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by WCF Data Services.</span></span> <span data-ttu-id="52ba3-110">Te opcje i podejścia uwierzytelniania są szczegółowo opisane w [wieloczęściowej serii OData i Authentication](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span><span class="sxs-lookup"><span data-stu-id="52ba3-110">These authentication options and approaches are detailed in the multipart [OData and Authentication series](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="52ba3-111">Opcje uwierzytelniania dla usługi danych programu WCF</span><span class="sxs-lookup"><span data-stu-id="52ba3-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="52ba3-112">W poniższej tabeli wymieniono niektóre z dostępnych mechanizmów uwierzytelniania, które pomagają w uwierzytelnieniu żądań kierowanych do usługi danych programu WCF.</span><span class="sxs-lookup"><span data-stu-id="52ba3-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="52ba3-113">Opcje uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="52ba3-113">Authentication Options</span></span>|<span data-ttu-id="52ba3-114">Opis</span><span class="sxs-lookup"><span data-stu-id="52ba3-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="52ba3-115">Uwierzytelnianie anonimowe</span><span class="sxs-lookup"><span data-stu-id="52ba3-115">Anonymous authentication</span></span>|<span data-ttu-id="52ba3-116">Jeśli jest włączone uwierzytelnianie anonimowe HTTP, każdy podmiot zabezpieczeń jest w stanie połączyć się z usługą danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="52ba3-117">W przypadku dostępu anonimowego nie są wymagane poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="52ba3-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="52ba3-118">Użyj tej opcji tylko wtedy, gdy każdemu użytkownikowi chcesz zezwolić na dostęp do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="52ba3-119">Uwierzytelnianie podstawowe i szyfrowane</span><span class="sxs-lookup"><span data-stu-id="52ba3-119">Basic and digest authentication</span></span>|<span data-ttu-id="52ba3-120">Do uwierzytelnienia są wymagane poświadczenia składające się z nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="52ba3-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="52ba3-121">Obsługuje uwierzytelnianie klientów nieopartych na systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="52ba3-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="52ba3-122">**Uwaga dotycząca zabezpieczeń:**  Podstawowe poświadczenia uwierzytelniania (nazwa użytkownika i hasło) są wysyłane w sposób przejrzysty i mogą zostać przechwycone.</span><span class="sxs-lookup"><span data-stu-id="52ba3-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="52ba3-123">W przypadku uwierzytelniania szyfrowanego wysyłana jest wartość skrótu oparta na podanych poświadczeniach, co sprawia, że jest ono bezpieczniejsze niż uwierzytelnianie podstawowe.</span><span class="sxs-lookup"><span data-stu-id="52ba3-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="52ba3-124">Obie te metody są podatne na ataki man-in-middle.</span><span class="sxs-lookup"><span data-stu-id="52ba3-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="52ba3-125">W przypadku korzystania z tych metod uwierzytelniania należy rozważyć szyfrowanie komunikacji między klientem a usługą danych przy użyciu protokołu Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="52ba3-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="52ba3-126">Internetowe usługi informacyjne firmy Microsoft (IIS) zapewniają implementację uwierzytelniania podstawowego i szyfrowego dla żądań HTTP w aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="52ba3-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="52ba3-127">Ta implementacja dostawcy uwierzytelniania systemu Windows umożliwia aplikacji klienta programu .NET Framework podanie poświadczeń w nagłówku żądania HTTP skierowanego do usługi danych w celu bezproblemowego wynegocjowania uwierzytelnienia użytkownika systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="52ba3-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="52ba3-128">Aby uzyskać więcej informacji, zobacz [Technical Reference uwierzytelniania szyfrowanego](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="52ba3-128">For more information, see [Digest Authentication Technical Reference](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span></span><br /><br /> <span data-ttu-id="52ba3-129">Jeśli chcesz, aby usługa danych używała uwierzytelniania podstawowego na podstawie niektórych usług uwierzytelniania niestandardowego, a nie poświadczeń systemu Windows, należy zaimplementować niestandardowy moduł ADP.NET HTTP do uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="52ba3-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom ADP.NET HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="52ba3-130">Na przykład, jak używać niestandardowego schematu uwierzytelniania podstawowego z usługami WCF Data Services, zobacz wpis w blogu [OData i uwierzytelnianie — część 6 – Uwierzytelnianie podstawowe niestandardowe](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span><span class="sxs-lookup"><span data-stu-id="52ba3-130">For an example of how to use a custom basic authentication scheme with WCF Data Services, see the blog post [OData and Authentication – Part 6 – Custom Basic Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span></span>|  
|<span data-ttu-id="52ba3-131">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="52ba3-131">Windows authentication</span></span>|<span data-ttu-id="52ba3-132">Poświadczenia oparte na systemie Windows są wymieniane przy użyciu protokołu NTLM lub Kerberos.</span><span class="sxs-lookup"><span data-stu-id="52ba3-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="52ba3-133">Ten mechanizm jest bezpieczniejszy niż uwierzytelnianie podstawowe lub szyfrowane, ale wymaga, aby klient był aplikacją opartą na systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="52ba3-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="52ba3-134">Usługi IIS zapewniają również implementację uwierzytelniania systemu Windows dla żądań HTTP w aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="52ba3-134">IIS also provides an implementation of Windows authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="52ba3-135">Aby uzyskać więcej informacji, zobacz [ASP.NET Omówienie uwierzytelniania formularzy](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="52ba3-135">For more information, see [ASP.NET Forms Authentication Overview](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="52ba3-136">Na przykład sposobu korzystania z uwierzytelniania systemu Windows w usługach WCF Data Services zobacz wpis w blogu [OData i uwierzytelnianie – Część 2 – Uwierzytelnianie systemu Windows](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span><span class="sxs-lookup"><span data-stu-id="52ba3-136">For an example of how to use Windows authentication with WCF Data Services, see the blog post [OData and Authentication – Part 2 – Windows Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span></span>|  
|<span data-ttu-id="52ba3-137">uwierzytelnianie formularzy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="52ba3-137">ASP.NET forms authentication</span></span>|<span data-ttu-id="52ba3-138">Uwierzytelnianie formularzy pozwala uwierzytelniać użytkowników przy użyciu własnego kodu, a następnie utrzymywać token uwierzytelniania w pliku cookie lub adresie URL strony.</span><span class="sxs-lookup"><span data-stu-id="52ba3-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="52ba3-139">Uwierzytelniasz nazwy i hasła użytkowników używających utworzonego przez Ciebie formularza logowania.</span><span class="sxs-lookup"><span data-stu-id="52ba3-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="52ba3-140">Nieuwierzytelnione żądania są przekierowywane na stronę logowania, gdzie użytkownik podaje poświadczenia i przesyła formularz.</span><span class="sxs-lookup"><span data-stu-id="52ba3-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="52ba3-141">Jeśli aplikacja uwierzytelni żądanie, system wystawia bilet, który zawiera klucz umożliwiający ponowne ustalenie tożsamości dla kolejnych żądań.</span><span class="sxs-lookup"><span data-stu-id="52ba3-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="52ba3-142">Aby uzyskać więcej informacji, zobacz [Dostawca uwierzytelniania formularzy](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="52ba3-142">For more information, see [Forms Authentication Provider](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="52ba3-143">**Uwaga dotycząca zabezpieczeń:**  Domyślnie plik cookie zawierający bilet uwierzytelniania formularzy nie jest zabezpieczony podczas korzystania z uwierzytelniania formularzy w ASP.NET aplikacji sieci Web.</span><span class="sxs-lookup"><span data-stu-id="52ba3-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a ASP.NET Web application.</span></span> <span data-ttu-id="52ba3-144">Należy rozważyć wymaganie protokołu SSL w celu ochrony zarówno biletu uwierzytelniania, jak i początkowych poświadczeń logowania.</span><span class="sxs-lookup"><span data-stu-id="52ba3-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="52ba3-145">Na przykład sposobu korzystania z uwierzytelniania formularzy w usługach danych WCF można znaleźć w wpisie w blogu [OData i Uwierzytelnianie – część 7 – Uwierzytelnianie formularzy](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span><span class="sxs-lookup"><span data-stu-id="52ba3-145">For an example of how to use forms authentication with WCF Data Services, see the blog post [OData and Authentication – Part 7 – Forms Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span></span>|  
|<span data-ttu-id="52ba3-146">Uwierzytelnianie oparte na oświadczeniach</span><span class="sxs-lookup"><span data-stu-id="52ba3-146">Claims-based authentication</span></span>|<span data-ttu-id="52ba3-147">W uwierzytelnianiu opartym na oświadczeniach usługa danych opiera się na zaufanej usłudze dostawcy tożsamości "innej firmy" w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="52ba3-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="52ba3-148">Dostawca tożsamości pozytywnie uwierzytelnia użytkownika, który żąda dostępu do zasobów usługi danych, i wystawia token udzielający dostępu do żądanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="52ba3-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="52ba3-149">Token ten jest następnie prezentowany usłudze danych, która udziela użytkownikowi dostępu na podstawie relacji zaufania z usługą tożsamości, która wystawiła token dostępu.</span><span class="sxs-lookup"><span data-stu-id="52ba3-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="52ba3-150">Zaletą używania dostawcy uwierzytelniania opartego na oświadczeniach jest to, że tej metody można używać do uwierzytelniania różnych typów klientów między domenami zaufania.</span><span class="sxs-lookup"><span data-stu-id="52ba3-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="52ba3-151">Korzystając z takiego dostawcy innej firmy, usługa danych zdejmuje z siebie ciężar obsługi i uwierzytelniania użytkowników.</span><span class="sxs-lookup"><span data-stu-id="52ba3-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="52ba3-152">OAuth 2.0 to protokół uwierzytelniania opartego na oświadczeniach, który jest obsługiwany jako usługa federacyjnej autoryzacji przez funkcję kontroli dostępu programu AppFabric systemu Microsoft Azure.</span><span class="sxs-lookup"><span data-stu-id="52ba3-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Windows Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="52ba3-153">Protokół ten obsługuje usługi oparte na protokole REST.</span><span class="sxs-lookup"><span data-stu-id="52ba3-153">This protocol supports REST-based services.</span></span> <span data-ttu-id="52ba3-154">Na przykład sposobu używania OAuth 2.0 z WCF Data Services, zobacz wpis w blogu [OData i uwierzytelnianie - Część 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span><span class="sxs-lookup"><span data-stu-id="52ba3-154">For an example of how to use OAuth 2.0 with WCF Data Services, see the blog post [OData and Authentication – Part 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span></span>|  
  
<a name="clientAuthentication"></a>
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="52ba3-155">Uwierzytelnianie w bibliotece klienta</span><span class="sxs-lookup"><span data-stu-id="52ba3-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="52ba3-156">Domyślnie biblioteka klienta usług danych WCF nie dostarcza poświadczeń podczas żądania do usługi OData.</span><span class="sxs-lookup"><span data-stu-id="52ba3-156">By default, the WCF Data Services client library does not supply credentials when making a request to an OData service.</span></span> <span data-ttu-id="52ba3-157">Gdy dane logowania są wymagane przez usługę danych do uwierzytelniania użytkownika, te <xref:System.Net.NetworkCredential> poświadczenia mogą <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> być <xref:System.Data.Services.Client.DataServiceContext>dostarczane w właściwości , jak w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="52ba3-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="52ba3-158">Aby uzyskać więcej informacji, zobacz [Jak: Określanie poświadczeń klienta dla żądania usługi danych](specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="52ba3-159">Gdy usługa danych wymaga poświadczeń logowania, których nie można określić za pomocą <xref:System.Net.NetworkCredential> obiektu, takiego jak token oparty `Authorization` na `Cookie` oświadczeniach lub plik cookie, należy ręcznie ustawić nagłówki w żądaniu HTTP, zwykle nagłówki i nagłówki.</span><span class="sxs-lookup"><span data-stu-id="52ba3-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="52ba3-160">Aby uzyskać więcej informacji na temat tego rodzaju scenariusza uwierzytelniania, zobacz wpis w blogu [OData i uwierzytelnianie - Część 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span><span class="sxs-lookup"><span data-stu-id="52ba3-160">For more information about this kind of authentication scenario, see the blog post [ OData and Authentication – Part 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span></span> <span data-ttu-id="52ba3-161">Na przykład ustawiania nagłówków HTTP w komunikacie żądania zobacz [Jak: Ustawianie nagłówków w żądaniu klienta](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="52ba3-162">Personifikacja</span><span class="sxs-lookup"><span data-stu-id="52ba3-162">Impersonation</span></span>  
 <span data-ttu-id="52ba3-163">Na ogół usługa danych uzyskuje dostęp do wymaganych zasobów, takich jak pliki na serwerze lub baza danych, przy użyciu poświadczeń procesu roboczego hostującego usługę danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="52ba3-164">Podczas korzystania z personifikacji, ASP.NET aplikacje można wykonać za pomocą tożsamości systemu Windows (konto użytkownika) użytkownika składającego żądanie.</span><span class="sxs-lookup"><span data-stu-id="52ba3-164">When using impersonation, ASP.NET applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="52ba3-165">Personifikacja jest powszechnie stosowana w aplikacjach, które przy uwierzytelnieniu użytkownika opierają się na programie IIS, i poświadczenia tego podmiotu zabezpieczeń są używane do uzyskiwania dostępu do wymaganych zasobów.</span><span class="sxs-lookup"><span data-stu-id="52ba3-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="52ba3-166">Aby uzyskać więcej informacji, zobacz [ASP.NET personifikacji](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="52ba3-166">For more information, see [ASP.NET Impersonation](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="52ba3-167">Konfigurowanie autoryzacji usługi danych</span><span class="sxs-lookup"><span data-stu-id="52ba3-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="52ba3-168">Autoryzacja to udzielenie dostępu do zasobów aplikacji podmiotowi zabezpieczeń lub procesowi, który został zidentyfikowany na podstawie przeprowadzonego wcześniej pomyślnego uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="52ba3-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="52ba3-169">Ogólną praktyką jest udzielanie użytkownikom usługi danych tylko uprawnień wystarczających do wykonywania operacji wymaganych przez aplikacje klienta.</span><span class="sxs-lookup"><span data-stu-id="52ba3-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="52ba3-170">Ograniczanie dostępu do zasobów usługi danych</span><span class="sxs-lookup"><span data-stu-id="52ba3-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="52ba3-171">Domyślnie usługi WCF Data Services umożliwia udzielanie wspólnego dostępu do odczytu i zapisu względem zasobów usługi danych (operacji zestawu jednostek i usług) każdemu użytkownikowi, który ma dostęp do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-171">By default, WCF Data Services enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="52ba3-172">Reguły, które definiują prawa do odczytu i zapisu, można określić osobno dla każdego zestawu jednostek uwidacznianego przez usługę danych, a także dla każdej operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="52ba3-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="52ba3-173">Zaleca się zawężenie zarówno praw do odczytu, jak i do zapisu tylko do zasobów, które są wymagane przez aplikację klienta.</span><span class="sxs-lookup"><span data-stu-id="52ba3-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="52ba3-174">Aby uzyskać więcej informacji, zobacz [Minimalne wymagania dotyczące dostępu do zasobów](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="52ba3-174">For more information, see [Minimum Resource Access Requirements](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="52ba3-175">Wdrażanie interceptorów opartych na rolach</span><span class="sxs-lookup"><span data-stu-id="52ba3-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="52ba3-176">Interceptory umożliwiają przechwytywanie żądań zasobów usługi danych, zanim zostaną one przetworzone przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="52ba3-177">Aby uzyskać więcej informacji, zobacz [Interceptors](interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-177">For more information, see [Interceptors](interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="52ba3-178">Interceptory pozwalają na podejmowanie decyzji dotyczących autoryzacji na podstawie uwierzytelnionego użytkownika, który wysłał żądanie.</span><span class="sxs-lookup"><span data-stu-id="52ba3-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="52ba3-179">Na przykład jak ograniczyć dostęp do zasobów usługi danych na podstawie uwierzytelnionej tożsamości użytkownika, zobacz [Jak: Przechwytywanie komunikatów usługi danych](how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-179">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="52ba3-180">Ograniczanie dostępu do trwałego magazynu danych i zasobów lokalnych</span><span class="sxs-lookup"><span data-stu-id="52ba3-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="52ba3-181">Kontom, które są używane do uzyskiwania dostępu do magazynu trwałego, należy udzielić w bazie danych lub systemie plików praw wystarczających do obsługi wymagań usługi danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="52ba3-182">Jeśli jest używane uwierzytelnianie anonimowe, jest to konto używane do uruchamiania aplikacji macierzystej.</span><span class="sxs-lookup"><span data-stu-id="52ba3-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="52ba3-183">Aby uzyskać więcej informacji, zobacz [Jak: Tworzenie usługi danych WCF uruchomionej na usługach IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="52ba3-184">Jeśli jest używana personifikacja, uwierzytelnionym użytkownikom należy udzielić dostępu do tych zasobów, zwykle jako części grupy systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="52ba3-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="52ba3-185">Inne uwagi dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="52ba3-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="52ba3-186">Zabezpieczanie danych w ładunku</span><span class="sxs-lookup"><span data-stu-id="52ba3-186">Secure the Data in the Payload</span></span>  
<span data-ttu-id="52ba3-187">OData jest oparty na protokole HTTP.</span><span class="sxs-lookup"><span data-stu-id="52ba3-187">OData is based on the HTTP protocol.</span></span> <span data-ttu-id="52ba3-188">W komunikacie HTTP nagłówek może zawierać cenne poświadczenia użytkownika, zależnie od uwierzytelniania implementowanego przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="52ba3-189">Treść komunikatu może również zawierać cenne dane klienta, które muszą być chronione.</span><span class="sxs-lookup"><span data-stu-id="52ba3-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="52ba3-190">W obu tych przypadkach zaleca się używanie protokołu SSL do ochrony tych informacji w sieci.</span><span class="sxs-lookup"><span data-stu-id="52ba3-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="52ba3-191">Ignorowane nagłówki komunikatów i pliki cookie</span><span class="sxs-lookup"><span data-stu-id="52ba3-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="52ba3-192">Nagłówki żądania HTTP inne niż te, które deklarują typy zawartości i lokalizacje zasobów, są ignorowane i nigdy nie są ustawiane przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="52ba3-193">Pliki cookie mogą być używane jako część schematu uwierzytelniania, na przykład z uwierzytelnianiem ASP.NET formularzy.</span><span class="sxs-lookup"><span data-stu-id="52ba3-193">Cookies can be used as part of an authentication scheme, such as with ASP.NET Forms Authentication.</span></span> <span data-ttu-id="52ba3-194">Jednak wszystkie pliki cookie HTTP ustawione na żądanie przychodzące są ignorowane przez usługi danych WCF.</span><span class="sxs-lookup"><span data-stu-id="52ba3-194">However, any HTTP cookies set on an incoming request are ignored by WCF DataServices.</span></span> <span data-ttu-id="52ba3-195">Host usługi danych może przetwarzać plik cookie, ale środowisko wykonawcze WCF Data Services nigdy nie analizuje ani nie zwraca plików cookie.</span><span class="sxs-lookup"><span data-stu-id="52ba3-195">The host of a data service may process the cookie, but the WCF Data Services runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="52ba3-196">Biblioteka klienta usług danych WCF nie przetwarza również plików cookie wysyłanych w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="52ba3-196">The WCF Data Services client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="52ba3-197">Niestandardowe wymagania hostingu</span><span class="sxs-lookup"><span data-stu-id="52ba3-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="52ba3-198">Domyślnie usługi WCF Data Services są tworzone jako aplikacja ASP.NET hostowana w usługach IIS.</span><span class="sxs-lookup"><span data-stu-id="52ba3-198">By default, WCF Data Services is created as an ASP.NET application hosted in IIS.</span></span> <span data-ttu-id="52ba3-199">Pozwala to usłudze danych na korzystanie z zachowań związanych z zabezpieczeniami zaimplementowanych na tej platformie.</span><span class="sxs-lookup"><span data-stu-id="52ba3-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="52ba3-200">Można zdefiniować usługi danych WCF, które są hostowane przez hosta niestandardowego.</span><span class="sxs-lookup"><span data-stu-id="52ba3-200">You can define WCF Data Services that are hosted by a custom host.</span></span> <span data-ttu-id="52ba3-201">Aby uzyskać więcej informacji, zobacz [Hostowanie usługi danych](hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="52ba3-201">For more information, see [Hosting the Data Service](hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="52ba3-202">Składniki i platforma hostująca usługę danych muszą zapewnić następujące zachowania związane z zabezpieczeniami, aby zapobiec atakom na usługę danych:</span><span class="sxs-lookup"><span data-stu-id="52ba3-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
- <span data-ttu-id="52ba3-203">Ogranicz długość identyfikatora URI akceptowanego w żądaniu usługi danych dla wszystkich możliwych operacji.</span><span class="sxs-lookup"><span data-stu-id="52ba3-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
- <span data-ttu-id="52ba3-204">Ogranicz rozmiar przychodzących i wychodzących komunikatów HTTP.</span><span class="sxs-lookup"><span data-stu-id="52ba3-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
- <span data-ttu-id="52ba3-205">Ogranicz łączną liczbę zaległych żądań w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="52ba3-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
- <span data-ttu-id="52ba3-206">Ogranicz rozmiar nagłówków HTTP i ich wartości oraz zapewnij usługom danych WCF dostęp do danych nagłówka.</span><span class="sxs-lookup"><span data-stu-id="52ba3-206">Limit the size of HTTP headers and their values, and provide WCF Data Services access to header data.</span></span>  
  
- <span data-ttu-id="52ba3-207">Wykrywaj i odpieraj znane ataki, takie jak TCP SYN i ataki przez powtórzenie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="52ba3-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="52ba3-208">Wartości nie są już kodowane</span><span class="sxs-lookup"><span data-stu-id="52ba3-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="52ba3-209">Wartości właściwości wysyłane do usługi danych nie są dalej kodowane przez środowisko uruchomieniowe WCF Data Services.</span><span class="sxs-lookup"><span data-stu-id="52ba3-209">Property values sent to the data service are not further encoded by the WCF Data Services runtime.</span></span> <span data-ttu-id="52ba3-210">Jeśli na przykład właściwość ciągu jednostki zawiera sformatowaną zawartość HTML, znaczniki nie są kodowane w formacie HTML przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="52ba3-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="52ba3-211">Ponadto usługa danych nie koduje już wartości właściwości w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="52ba3-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="52ba3-212">Biblioteka klienta również nie przeprowadza dodatkowego kodowania.</span><span class="sxs-lookup"><span data-stu-id="52ba3-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="52ba3-213">Uwagi dotyczące aplikacji klienta</span><span class="sxs-lookup"><span data-stu-id="52ba3-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="52ba3-214">Następujące zagadnienia dotyczące zabezpieczeń mają zastosowanie do aplikacji korzystających z klienta usług danych WCF w celu uzyskania dostępu do usług OData:</span><span class="sxs-lookup"><span data-stu-id="52ba3-214">The following security considerations apply to applications that use the WCF Data Services client to access OData services:</span></span>  
  
- <span data-ttu-id="52ba3-215">Biblioteka klienta zakłada, że protokoły używane w celu uzyskania dostępu do usługi danych zapewniają odpowiedni poziom zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="52ba3-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
- <span data-ttu-id="52ba3-216">Biblioteka klienta używa wszystkich wartości domyślnych dla limitów czasu i opcji analizy podstawowych stosów transportu zapewnianych przez platformę.</span><span class="sxs-lookup"><span data-stu-id="52ba3-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
- <span data-ttu-id="52ba3-217">Biblioteka klienta nie odczytuje żadnych ustawień z plików konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="52ba3-217">The client library does not read any settings from application configuration files.</span></span>  
  
- <span data-ttu-id="52ba3-218">Biblioteka klienta nie implementuje żadnych mechanizmów dostępu między domenami.</span><span class="sxs-lookup"><span data-stu-id="52ba3-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="52ba3-219">W zamian opiera się na mechanizmach zapewnianych przez podstawowy stos HTTP.</span><span class="sxs-lookup"><span data-stu-id="52ba3-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
- <span data-ttu-id="52ba3-220">Biblioteka klienta nie ma żadnych elementów interfejsu użytkownika i nigdy nie próbuje wyświetlać ani renderować danych, które odbiera lub wysyła.</span><span class="sxs-lookup"><span data-stu-id="52ba3-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
- <span data-ttu-id="52ba3-221">Firma Microsoft zaleca, aby aplikacje klienta zawsze weryfikowały dane wprowadzone przez użytkownika, a także akceptowane dane pochodzące z niezaufanych usług.</span><span class="sxs-lookup"><span data-stu-id="52ba3-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="52ba3-222">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="52ba3-222">See also</span></span>

- [<span data-ttu-id="52ba3-223">Definiowanie usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="52ba3-223">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="52ba3-224">Biblioteka klienta usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="52ba3-224">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
