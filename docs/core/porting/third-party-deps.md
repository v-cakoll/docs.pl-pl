---
title: Analizowanie zależności w kodzie portu do programu .NET Core
description: Dowiedz się, jak analizować zależności zewnętrzne w celu przenoszenia projektu z .NET Framework do programu .NET Core.
author: cartermp
ms.date: 10/22/2019
ms.custom: seodec18
ms.openlocfilehash: 5fa5a20e9a2b5427401835a0c1c6e1845d86c3ef
ms.sourcegitcommit: 9bd1c09128e012b6e34bdcbdf3576379f58f3137
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 10/23/2019
ms.locfileid: "72798795"
---
# <a name="analyze-your-dependencies-to-port-code-to-net-core"></a><span data-ttu-id="a3220-103">Analizowanie zależności w kodzie portu do programu .NET Core</span><span class="sxs-lookup"><span data-stu-id="a3220-103">Analyze your dependencies to port code to .NET Core</span></span>

<span data-ttu-id="a3220-104">Aby przenieść kod do programu .NET Core lub .NET Standard, musisz zrozumieć zależności.</span><span class="sxs-lookup"><span data-stu-id="a3220-104">To port your code to .NET Core or .NET Standard, you must understand your dependencies.</span></span> <span data-ttu-id="a3220-105">Zależności zewnętrzne to pakiety NuGet lub `.dll`s, do których odwołuje się projekt, ale nie kompilujesz siebie.</span><span class="sxs-lookup"><span data-stu-id="a3220-105">External dependencies are the NuGet packages or `.dll`s you reference in your project, but that you don't build yourself.</span></span>

## <a name="migrate-your-nuget-packages-to-packagereference"></a><span data-ttu-id="a3220-106">Migrowanie pakietów NuGet do `PackageReference`</span><span class="sxs-lookup"><span data-stu-id="a3220-106">Migrate your NuGet packages to `PackageReference`</span></span>

<span data-ttu-id="a3220-107">Program .NET Core używa [PackageReference](/nuget/consume-packages/package-references-in-project-files) , aby określić zależności pakietów.</span><span class="sxs-lookup"><span data-stu-id="a3220-107">.NET Core uses [PackageReference](/nuget/consume-packages/package-references-in-project-files) to specify package dependencies.</span></span> <span data-ttu-id="a3220-108">Jeśli używasz [pliku Packages. config](/nuget/reference/packages-config) do określania pakietów w projekcie, musisz przekonwertować go do formatu `PackageReference`, ponieważ `packages.config` nie jest obsługiwana w programie .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-108">If you're using [packages.config](/nuget/reference/packages-config) to specify your packages in your project, you need to convert it to the `PackageReference` format because `packages.config` isn't supported in .NET Core.</span></span>

<span data-ttu-id="a3220-109">Aby dowiedzieć się, jak przeprowadzić migrację, zobacz artykuł [Migrowanie z pliku Packages. config do PackageReference](/nuget/reference/migrate-packages-config-to-package-reference) .</span><span class="sxs-lookup"><span data-stu-id="a3220-109">To learn how to migrate, see the [Migrate from packages.config to PackageReference](/nuget/reference/migrate-packages-config-to-package-reference) article.</span></span>

## <a name="upgrade-your-nuget-packages"></a><span data-ttu-id="a3220-110">Uaktualnianie pakietów NuGet</span><span class="sxs-lookup"><span data-stu-id="a3220-110">Upgrade your NuGet packages</span></span>

<span data-ttu-id="a3220-111">Po przeprowadzeniu migracji projektu do formatu `PackageReference` należy sprawdzić, czy pakiety są zgodne z platformą .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-111">After your migrating your project to the `PackageReference` format, you need to verify if your packages are compatible with .NET Core.</span></span>

<span data-ttu-id="a3220-112">Najpierw Uaktualnij pakiety do najnowszej wersji.</span><span class="sxs-lookup"><span data-stu-id="a3220-112">First, upgrade your packages to the latest version that you can.</span></span> <span data-ttu-id="a3220-113">Można to zrobić za pomocą interfejsu użytkownika Menedżera pakietów NuGet w programie Visual Studio.</span><span class="sxs-lookup"><span data-stu-id="a3220-113">This can be done with the NuGet Package Manager UI in Visual Studio.</span></span> <span data-ttu-id="a3220-114">Prawdopodobnie nowsze wersje zależności pakietu są już zgodne z platformą .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-114">It's likely that newer versions of your package dependencies are already compatible with .NET Core.</span></span>

## <a name="analyze-your-package-dependencies"></a><span data-ttu-id="a3220-115">Analizowanie zależności pakietu</span><span class="sxs-lookup"><span data-stu-id="a3220-115">Analyze your package dependencies</span></span>

<span data-ttu-id="a3220-116">Jeśli nie zweryfikowano jeszcze, że przekonwertowane i uaktualnione zależności pakietów działają w programie .NET Core, istnieje kilka sposobów na osiągnięcie tego:</span><span class="sxs-lookup"><span data-stu-id="a3220-116">If you haven't already verified that your converted and upgraded package dependencies work on .NET Core, there are a few ways that you can achieve that:</span></span>

### <a name="analyze-nuget-packages-using-nugetorg"></a><span data-ttu-id="a3220-117">Analizowanie pakietów NuGet przy użyciu nuget.org</span><span class="sxs-lookup"><span data-stu-id="a3220-117">Analyze NuGet packages using nuget.org</span></span>

<span data-ttu-id="a3220-118">Możesz zobaczyć monikery platformy docelowej (TFMs), które każdy pakiet obsługuje na [NuGet.org](https://www.nuget.org/) w sekcji **zależności** strony pakietu.</span><span class="sxs-lookup"><span data-stu-id="a3220-118">You can see the Target Framework Monikers (TFMs) that each package supports on [nuget.org](https://www.nuget.org/) under the **Dependencies** section of the package page.</span></span>

<span data-ttu-id="a3220-119">Chociaż korzystanie z lokacji jest łatwiejsze w celu sprawdzenia zgodności, informacje o **zależnościach** nie są dostępne w lokacji dla wszystkich pakietów.</span><span class="sxs-lookup"><span data-stu-id="a3220-119">Although using the site is an easier method to verify the compatibility, **Dependencies** information isn't available on the site for all packages.</span></span>

### <a name="analyze-nuget-packages-using-nuget-package-explorer"></a><span data-ttu-id="a3220-120">Analizowanie pakietów NuGet przy użyciu Eksploratora pakietów NuGet</span><span class="sxs-lookup"><span data-stu-id="a3220-120">Analyze NuGet packages using NuGet Package Explorer</span></span>

<span data-ttu-id="a3220-121">Pakiet NuGet jest samym zestawem folderów, które zawierają zestawy specyficzne dla platformy.</span><span class="sxs-lookup"><span data-stu-id="a3220-121">A NuGet package is itself a set of folders that contain platform-specific assemblies.</span></span> <span data-ttu-id="a3220-122">Należy sprawdzić, czy w pakiecie znajduje się folder zawierający zgodny zestaw.</span><span class="sxs-lookup"><span data-stu-id="a3220-122">So you need to check if there's a folder that contains a compatible assembly inside the package.</span></span>

<span data-ttu-id="a3220-123">Najprostszym sposobem sprawdzenia folderów pakietów NuGet jest użycie narzędzia [Eksplorator pakietów NuGet](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer) .</span><span class="sxs-lookup"><span data-stu-id="a3220-123">The easiest way to inspect NuGet Package folders is to use the [NuGet Package Explorer](https://github.com/NuGetPackageExplorer/NuGetPackageExplorer) tool.</span></span> <span data-ttu-id="a3220-124">Po zainstalowaniu programu wykonaj następujące kroki, aby wyświetlić nazwy folderów:</span><span class="sxs-lookup"><span data-stu-id="a3220-124">After installing it, use the following steps to see the folder names:</span></span>

1. <span data-ttu-id="a3220-125">Otwórz Eksploratora pakietów NuGet.</span><span class="sxs-lookup"><span data-stu-id="a3220-125">Open the NuGet Package Explorer.</span></span>
2. <span data-ttu-id="a3220-126">Kliknij pozycję **Otwórz pakiet ze źródła online**.</span><span class="sxs-lookup"><span data-stu-id="a3220-126">Click **Open package from online feed**.</span></span>
3. <span data-ttu-id="a3220-127">Wyszukaj nazwę pakietu.</span><span class="sxs-lookup"><span data-stu-id="a3220-127">Search for the name of the package.</span></span>
4. <span data-ttu-id="a3220-128">Wybierz nazwę pakietu z wyników wyszukiwania, a następnie kliknij przycisk **Otwórz**.</span><span class="sxs-lookup"><span data-stu-id="a3220-128">Select the package name from the search results and click **open**.</span></span>
5. <span data-ttu-id="a3220-129">Rozwiń folder *lib* po prawej stronie i Sprawdź nazwy folderów.</span><span class="sxs-lookup"><span data-stu-id="a3220-129">Expand the *lib* folder on the right-hand side and look at folder names.</span></span>

<span data-ttu-id="a3220-130">Poszukaj folderu z nazwami przy użyciu jednego z następujących wzorców: `netstandardX.Y` lub `netcoreappX.Y`.</span><span class="sxs-lookup"><span data-stu-id="a3220-130">Look for a folder with names using one the following patterns: `netstandardX.Y` or `netcoreappX.Y`.</span></span>

<span data-ttu-id="a3220-131">Te wartości są [monikerami struktury docelowej (TFMs)](../../standard/frameworks.md) , które są mapowane na wersje [.NET Standard](../../standard/net-standard.md), .NET Core i tradycyjnych profilów biblioteki klas przenośnych (PCL), które są zgodne z platformą .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-131">These values are the [Target Framework Monikers (TFMs)](../../standard/frameworks.md) that map to versions of the [.NET Standard](../../standard/net-standard.md), .NET Core, and traditional Portable Class Library (PCL) profiles that are compatible with .NET Core.</span></span>

> [!IMPORTANT]
> <span data-ttu-id="a3220-132">Podczas przeglądania TFMs, który obsługuje pakiet, należy pamiętać, że `netcoreapp*`, chociaż jest zgodny, jest przeznaczony tylko dla projektów .NET Core, a nie dla projektów .NET Standard.</span><span class="sxs-lookup"><span data-stu-id="a3220-132">When looking at the TFMs that a package supports, note that `netcoreapp*`, while compatible, is for .NET Core projects only and not for .NET Standard projects.</span></span>
> <span data-ttu-id="a3220-133">Biblioteka przeznaczona tylko dla `netcoreapp*` i nie `netstandard*` może być używana przez inne aplikacje platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-133">A library that only targets `netcoreapp*` and not `netstandard*` can only be consumed by other .NET Core apps.</span></span>

## <a name="net-framework-compatibility-mode"></a><span data-ttu-id="a3220-134">.NET Framework tryb zgodności</span><span class="sxs-lookup"><span data-stu-id="a3220-134">.NET Framework compatibility mode</span></span>

<span data-ttu-id="a3220-135">Po przeanalizowaniu pakietów NuGet może się okazać, że są one przeznaczone tylko dla .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a3220-135">After analyzing the NuGet packages, you might find that they only target the .NET Framework.</span></span>

<span data-ttu-id="a3220-136">Począwszy od .NET Standard 2,0, wprowadzono .NET Framework tryb zgodności.</span><span class="sxs-lookup"><span data-stu-id="a3220-136">Starting with .NET Standard 2.0, the .NET Framework compatibility mode was introduced.</span></span> <span data-ttu-id="a3220-137">Ten tryb zgodności umożliwia projektom .NET Standard i .NET Core odwoływanie się do bibliotek .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="a3220-137">This compatibility mode allows .NET Standard and .NET Core projects to reference .NET Framework libraries.</span></span> <span data-ttu-id="a3220-138">Odwoływanie się do bibliotek .NET Framework nie działa dla wszystkich projektów, takich jak jeśli biblioteka używa interfejsów API Windows Presentation Foundation (WPF), ale odblokowuje wiele scenariuszy przenoszenia.</span><span class="sxs-lookup"><span data-stu-id="a3220-138">Referencing .NET Framework libraries doesn't work for all projects, such as if the library uses Windows Presentation Foundation (WPF) APIs, but it does unblock many porting scenarios.</span></span>

<span data-ttu-id="a3220-139">W przypadku odwoływania się do pakietów NuGet, które są przeznaczone dla .NET Framework w projekcie, takich jak [Huitian. PowerCollections](https://www.nuget.org/packages/Huitian.PowerCollections), otrzymujesz ostrzeżenie powrotu do pakietu ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) podobne do następującego przykładu:</span><span class="sxs-lookup"><span data-stu-id="a3220-139">When you reference NuGet packages that target the .NET Framework in your project, such as [Huitian.PowerCollections](https://www.nuget.org/packages/Huitian.PowerCollections), you get a package fallback warning ([NU1701](/nuget/reference/errors-and-warnings/nu1701)) similar to the following example:</span></span>

`NU1701: Package ‘Huitian.PowerCollections 1.0.0’ was restored using ‘.NETFramework,Version=v4.6.1’ instead of the project target framework ‘.NETStandard,Version=v2.0’. This package may not be fully compatible with your project.`

<span data-ttu-id="a3220-140">To ostrzeżenie jest wyświetlane, gdy dodajesz pakiet i za każdym razem, gdy kompilujesz, aby upewnić się, że ten pakiet został przetestowany z projektem.</span><span class="sxs-lookup"><span data-stu-id="a3220-140">That warning is displayed when you add the package and every time you build to make sure you test that package with your project.</span></span> <span data-ttu-id="a3220-141">Jeśli projekt działa zgodnie z oczekiwaniami, możesz pominąć to ostrzeżenie, edytując właściwości pakietu w Visual Studio lub edytując plik projektu ręcznie w ulubionym edytorze kodu.</span><span class="sxs-lookup"><span data-stu-id="a3220-141">If your project is working as expected, you can suppress that warning by editing the package properties in Visual Studio or by manually editing the project file in your favorite code editor.</span></span>

<span data-ttu-id="a3220-142">Aby pominąć ostrzeżenie przez edytowanie pliku projektu, Znajdź wpis `PackageReference` dla pakietu, dla którego chcesz pominąć ostrzeżenie, i Dodaj atrybut `NoWarn`.</span><span class="sxs-lookup"><span data-stu-id="a3220-142">To suppress the warning by editing the project file, find the `PackageReference` entry for the package you want to suppress the warning for and add the `NoWarn` attribute.</span></span> <span data-ttu-id="a3220-143">Atrybut `NoWarn` akceptuje rozdzieloną przecinkami listę wszystkich identyfikatorów ostrzeżeń.</span><span class="sxs-lookup"><span data-stu-id="a3220-143">The `NoWarn` attribute accepts a comma-separated list of all the warning IDs.</span></span> <span data-ttu-id="a3220-144">Poniższy przykład pokazuje, jak pominąć `NU1701` Ostrzeżenie dla pakietu `Huitian.PowerCollections`, edytując plik projektu ręcznie:</span><span class="sxs-lookup"><span data-stu-id="a3220-144">The following example shows how to suppress the `NU1701` warning for the `Huitian.PowerCollections` package by editing your project file manually:</span></span>

```xml
<ItemGroup>
  <PackageReference Include="Huitian.PowerCollections" Version="1.0.0" NoWarn="NU1701" />
</ItemGroup>
```

<span data-ttu-id="a3220-145">Aby uzyskać więcej informacji na temat pomijania ostrzeżeń kompilatora w programie Visual Studio, zobacz [pomijanie ostrzeżeń dla pakietów NuGet](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span><span class="sxs-lookup"><span data-stu-id="a3220-145">For more information on how to suppress compiler warnings in Visual Studio, see [Suppressing warnings for NuGet packages](/visualstudio/ide/how-to-suppress-compiler-warnings#suppress-warnings-for-nuget-packages).</span></span>

## <a name="what-to-do-when-your-nuget-package-dependency-doesnt-run-on-net-core"></a><span data-ttu-id="a3220-146">Co zrobić, gdy zależność pakietu NuGet nie jest uruchamiana na platformie .NET Core</span><span class="sxs-lookup"><span data-stu-id="a3220-146">What to do when your NuGet package dependency doesn't run on .NET Core</span></span>

<span data-ttu-id="a3220-147">Istnieje kilka rzeczy, które można wykonać, jeśli pakiet NuGet, od którego jest zależny, nie jest uruchamiany w programie .NET Core:</span><span class="sxs-lookup"><span data-stu-id="a3220-147">There are a few things you can do if a NuGet package you depend on doesn't run on .NET Core:</span></span>

1. <span data-ttu-id="a3220-148">Jeśli projekt jest typu open source, który jest hostowany w witrynie GitHub, możesz bezpośrednio przyangażować deweloperów.</span><span class="sxs-lookup"><span data-stu-id="a3220-148">If the project is open source and hosted somewhere like GitHub, you can engage the developers directly.</span></span>
2. <span data-ttu-id="a3220-149">Można skontaktować się z autorem bezpośrednio w witrynie [NuGet.org](https://www.nuget.org/). Wyszukaj pakiet, a następnie kliknij pozycję **skontaktuj się z właścicielem** po lewej stronie pakietu.</span><span class="sxs-lookup"><span data-stu-id="a3220-149">You can contact the author directly on [nuget.org](https://www.nuget.org/). Search for the package and click **Contact Owners** on the left-hand side of the package's page.</span></span>
3. <span data-ttu-id="a3220-150">Możesz wyszukać inny pakiet uruchomiony w programie .NET Core, który wykonuje to samo zadanie co używany pakiet.</span><span class="sxs-lookup"><span data-stu-id="a3220-150">You can search for another package that runs on .NET Core that accomplishes the same task as the package you were using.</span></span>
4. <span data-ttu-id="a3220-151">Możesz spróbować napisać kod, który pakiet wykonywał.</span><span class="sxs-lookup"><span data-stu-id="a3220-151">You can attempt to write the code the package was doing yourself.</span></span>
5. <span data-ttu-id="a3220-152">Możesz wyeliminować zależność od pakietu, zmieniając funkcjonalność aplikacji, co najmniej do momentu udostępnienia zgodnej wersji pakietu.</span><span class="sxs-lookup"><span data-stu-id="a3220-152">You could eliminate the dependency on the package by changing the functionality of your app, at least until a compatible version of the package becomes available.</span></span>

<span data-ttu-id="a3220-153">Pamiętaj, że obsłudze projektów open source i wydawcy pakietów NuGet często są ochotnikami.</span><span class="sxs-lookup"><span data-stu-id="a3220-153">Remember that open-source project maintainers and NuGet package publishers are often volunteers.</span></span> <span data-ttu-id="a3220-154">Przyczyniają się one do tego, że zadbają o daną domenę, wykonują ją bezpłatnie i często mają inne zadania dzienne.</span><span class="sxs-lookup"><span data-stu-id="a3220-154">They contribute because they care about a given domain, do it for free, and often have a different daytime job.</span></span> <span data-ttu-id="a3220-155">Należy więc wiedzieć, że podczas kontaktowania się z nimi w celu uzyskania pomocy technicznej dla platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-155">So be mindful of that when contacting them to ask for .NET Core support.</span></span>

<span data-ttu-id="a3220-156">Jeśli nie możesz rozwiązać problemu przy użyciu któregokolwiek z powyższych, być może trzeba będzie przenieść port do programu .NET Core w późniejszym terminie.</span><span class="sxs-lookup"><span data-stu-id="a3220-156">If you can't resolve your issue with any of the above, you may have to port to .NET Core at a later date.</span></span>

<span data-ttu-id="a3220-157">Zespół platformy .NET chce wiedzieć, które biblioteki są najważniejsze do obsługi platformy .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-157">The .NET Team would like to know which libraries are the most important to support with .NET Core.</span></span> <span data-ttu-id="a3220-158">Możesz wysłać wiadomość e-mail w celu dotnet@microsoft.com informacji o bibliotekach, których chcesz użyć.</span><span class="sxs-lookup"><span data-stu-id="a3220-158">You can send an email to dotnet@microsoft.com about the libraries you'd like to use.</span></span>

## <a name="analyze-dependencies-that-arent-nuget-packages"></a><span data-ttu-id="a3220-159">Analizowanie zależności, które nie są pakietami NuGet</span><span class="sxs-lookup"><span data-stu-id="a3220-159">Analyze dependencies that aren't NuGet packages</span></span>

<span data-ttu-id="a3220-160">Może istnieć zależność, która nie jest pakietem NuGet, taka jak biblioteka DLL w systemie plików.</span><span class="sxs-lookup"><span data-stu-id="a3220-160">You may have a dependency that isn't a NuGet package, such as a DLL in the file system.</span></span> <span data-ttu-id="a3220-161">Jedynym sposobem określenia przenośności tej zależności jest uruchomienie narzędzia [analizatora przenośności platformy .NET](https://github.com/Microsoft/dotnet-apiport) .</span><span class="sxs-lookup"><span data-stu-id="a3220-161">The only way to determine the portability of that dependency is to run the [.NET Portability Analyzer](https://github.com/Microsoft/dotnet-apiport) tool.</span></span> <span data-ttu-id="a3220-162">Narzędzie może analizować zestawy przeznaczone dla .NET Framework i identyfikować interfejsy API, które nie są przenośne na inne platformy .NET, takie jak .NET Core.</span><span class="sxs-lookup"><span data-stu-id="a3220-162">The tool can analyze assemblies that target the .NET Framework and identify APIs that aren't portable to other .NET platforms such as .NET Core.</span></span> <span data-ttu-id="a3220-163">Narzędzie można uruchomić jako aplikację konsolową lub jako [rozszerzenie programu Visual Studio](../../standard/analyzers/portability-analyzer.md).</span><span class="sxs-lookup"><span data-stu-id="a3220-163">You can run the tool as a console application or as a [Visual Studio extension](../../standard/analyzers/portability-analyzer.md).</span></span>

>[!div class="step-by-step"]
>[<span data-ttu-id="a3220-164">Next</span><span class="sxs-lookup"><span data-stu-id="a3220-164">Next</span></span>](libraries.md)
