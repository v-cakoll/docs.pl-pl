---
title: Tworzenie kolejek w programie WCF
ms.date: 03/30/2017
ms.assetid: e98d76ba-1acf-42cd-b137-0f8214661112
ms.openlocfilehash: 710ddedeb211ae6b874e2957943dbe60425b7476
ms.sourcegitcommit: cdb295dd1db589ce5169ac9ff096f01fd0c2da9d
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/09/2020
ms.locfileid: "84601117"
---
# <a name="queuing-in-wcf"></a><span data-ttu-id="c1f2a-102">Tworzenie kolejek w programie WCF</span><span class="sxs-lookup"><span data-stu-id="c1f2a-102">Queuing in WCF</span></span>
<span data-ttu-id="c1f2a-103">W tej sekcji opisano sposób używania komunikacji kolejkowanej w programie Windows Communication Foundation (WCF).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-103">This section describes how to use queued communication in Windows Communication Foundation (WCF).</span></span>  
  
## <a name="queues-as-a-wcf-transport-binding"></a><span data-ttu-id="c1f2a-104">Kolejki jako powiązanie transportu WCF</span><span class="sxs-lookup"><span data-stu-id="c1f2a-104">Queues as a WCF transport binding</span></span>  
 <span data-ttu-id="c1f2a-105">W programie WCF kontrakty określają, co jest wymieniane.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-105">In WCF, the contracts specify what is being exchanged.</span></span> <span data-ttu-id="c1f2a-106">Kontrakty są wymianą komunikatów zależnych od firmy lub aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-106">Contracts are business-dependent or application-specific message exchanges.</span></span> <span data-ttu-id="c1f2a-107">Mechanizm używany do wymiany komunikatów (lub "How") jest określony w powiązaniach.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-107">The mechanism used to exchange messages (or the "how") is specified in the bindings.</span></span> <span data-ttu-id="c1f2a-108">Powiązania w programie WCF hermetyzują szczegóły wymiany komunikatów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-108">Bindings in WCF encapsulate details of the message exchange.</span></span> <span data-ttu-id="c1f2a-109">Uwidaczniają pokrętła konfiguracyjne dla użytkownika w celu kontrolowania różnych aspektów transportu lub protokołu, które reprezentują powiązania.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-109">They expose configuration knobs for the user to control various aspects of the transport or the protocol that the bindings represent.</span></span> <span data-ttu-id="c1f2a-110">Kolejkowanie w programie WCF jest traktowane jak inne powiązania transportowe, które jest dużą korzyść dla wielu aplikacji obsługujących kolejkowanie.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-110">Queuing in WCF is treated like any other transport binding, which is a big advantage for many queuing applications.</span></span> <span data-ttu-id="c1f2a-111">Obecnie wiele aplikacji obsługujących kolejkowanie jest pisanych inaczej niż inne aplikacje rozproszone w stylu zdalnego wywołania procedury (RPC), co utrudnia ich śledzenie i konserwowanie.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-111">Today, many queuing applications are written differently from other remote procedure call (RPC)-style distributed applications, making it harder to follow and maintain.</span></span> <span data-ttu-id="c1f2a-112">Dzięki platformie WCF styl pisania aplikacji rozproszonej jest znacznie taki sam, co ułatwia ich wykonywanie i konserwowanie.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-112">With WCF, the style of writing a distributed application is much the same, making it easier to follow and maintain.</span></span> <span data-ttu-id="c1f2a-113">Ponadto dzięki rozróżnieniu mechanizmu wymiany niezależnie od logiki biznesowej, łatwiej jest skonfigurować Transport lub wprowadzić w nim zmiany bez wpływu na kod aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-113">Moreover, by factoring out the mechanism of exchange separately from the business logic, it is easier to configure the transport or make changes to it without affecting application specific code.</span></span> <span data-ttu-id="c1f2a-114">Na poniższej ilustracji przedstawiono strukturę usługi i klienta programu WCF przy użyciu usługi MSMQ jako transportu.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-114">The following figure illustrates the structure of a WCF service and client using MSMQ as a transport.</span></span>  
  
 <span data-ttu-id="c1f2a-115">![Diagram aplikacji znajdujących się w kolejce](media/distributed-queue-figure.jpg "Rozproszona-Queueed-Figure")</span><span class="sxs-lookup"><span data-stu-id="c1f2a-115">![Queued Application Diagram](media/distributed-queue-figure.jpg "Distributed-Queue-Figure")</span></span>  
  
 <span data-ttu-id="c1f2a-116">Jak widać na poprzedniej ilustracji, klient i usługa muszą definiować tylko semantykę aplikacji, czyli umowę i implementację.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-116">As you can see from the preceding figure, the client and service must define only the application semantics, that is, the contract and implementation.</span></span> <span data-ttu-id="c1f2a-117">Usługa konfiguruje Powiązywanie w kolejce przy użyciu preferowanych ustawień.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-117">The service configures a queued binding with preferred settings.</span></span> <span data-ttu-id="c1f2a-118">Klient korzysta z narzędzia do obsługi [metadanych ServiceModel (Svcutil. exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) , aby wygenerować klienta WCF w usłudze i wygenerować plik konfiguracji, który opisuje powiązania, które będą używane do wysyłania komunikatów do usługi.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-118">The client uses the [ServiceModel Metadata Utility Tool (Svcutil.exe)](../servicemodel-metadata-utility-tool-svcutil-exe.md) to generate a WCF client to the service and to generate a configuration file that describes the bindings to use to send messages to the service.</span></span> <span data-ttu-id="c1f2a-119">W tym celu wysłanie komunikatu w kolejce powoduje utworzenie wystąpienia klienta programu WCF i wywołanie na nim operacji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-119">Thus, to send a queued message, the client instantiates a WCF client and invokes an operation on it.</span></span> <span data-ttu-id="c1f2a-120">Spowoduje to wysłanie wiadomości do kolejki transmisji i przekazanie jej do kolejki docelowej.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-120">This causes the message to be sent to the transmission queue and transferred to the target queue.</span></span> <span data-ttu-id="c1f2a-121">Wszystkie złożoności komunikacji kolejkowanej są ukryte w aplikacji wysyłającej i otrzymującej komunikaty.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-121">All the complexities of queued communication are hidden from the application that is sending and receiving messages.</span></span>  
  
 <span data-ttu-id="c1f2a-122">Ostrzeżenia dotyczące umieszczania w kolejce powiązań w programie WCF obejmują:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-122">Caveats about queued binding in WCF include:</span></span>  
  
- <span data-ttu-id="c1f2a-123">Wszystkie operacje usługi muszą być jednokierunkowe, ponieważ domyślne powiązanie kolejkowane w programie WCF nie obsługuje komunikacji dwukierunkowej przy użyciu kolejek.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-123">All service operations must be one-way because the default queued binding in WCF does not support duplex communication using queues.</span></span> <span data-ttu-id="c1f2a-124">Dwukierunkowa próbka komunikacji ([komunikacja dwukierunkowa](../samples/two-way-communication.md)) przedstawia sposób użycia umów 2 1 w celu zaimplementowania komunikacji dupleksowej przy użyciu kolejek.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-124">A two-way communication sample ([Two-Way Communication](../samples/two-way-communication.md)) illustrates how to use two one-way contracts to implement duplex communication using queues.</span></span>  
  
- <span data-ttu-id="c1f2a-125">Aby wygenerować klienta WCF przy użyciu wymiany metadanych, wymagany jest dodatkowy punkt końcowy protokołu HTTP w usłudze, aby można było wykonywać zapytania bezpośrednio w celu wygenerowania klienta WCF i uzyskać informacje o powiązaniu, aby odpowiednio skonfigurować komunikację z kolejką.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-125">To generate a WCF client using metadata exchange requires an additional HTTP endpoint on the service so that it can be queried directly to generate the WCF client and obtain binding information to appropriately configure queued communication.</span></span>  
  
- <span data-ttu-id="c1f2a-126">W oparciu o powiązanie umieszczone w kolejce, wymagana jest dodatkowa konfiguracja poza programem WCF.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-126">Based on the queued binding, extra configuration outside of WCF is required.</span></span> <span data-ttu-id="c1f2a-127">Na przykład Klasa, <xref:System.ServiceModel.NetMsmqBinding> która jest dostarczana z usługą WCF, wymaga skonfigurowania powiązań oraz minimalnego skonfigurowania usługi kolejkowania komunikatów (MSMQ).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-127">For example, the <xref:System.ServiceModel.NetMsmqBinding> class that is shipped with WCF requires you to configure the bindings as well as minimally configure Message Queuing (MSMQ).</span></span>  
  
 <span data-ttu-id="c1f2a-128">W poniższych sekcjach opisano określone powiązania w kolejce dostarczone z programem WCF, które są oparte na usłudze MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-128">The following sections describe the specific queued bindings shipped with WCF, which are based on MSMQ.</span></span>  
  
### <a name="msmq"></a><span data-ttu-id="c1f2a-129">Usługa MSMQ</span><span class="sxs-lookup"><span data-stu-id="c1f2a-129">MSMQ</span></span>  
 <span data-ttu-id="c1f2a-130">Transport w kolejce w usłudze WCF używa usługi MSMQ do obsługi komunikacji znajdującej się w kolejce.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-130">The queued transport in WCF uses MSMQ for its queued communication.</span></span>  
  
 <span data-ttu-id="c1f2a-131">Usługa MSMQ jest dostarczana jako składnik opcjonalny z systemem Windows i działa jako usługa NT.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-131">MSMQ ships as an optional component with Windows and runs as an NT service.</span></span> <span data-ttu-id="c1f2a-132">Przechwytuje komunikaty do transmisji w kolejce transmisji oraz do dostarczania w kolejce docelowej.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-132">It captures messages for transmission in a transmission queue and for delivery in a target queue.</span></span> <span data-ttu-id="c1f2a-133">Menedżerowie kolejki MSMQ implementują niezawodny protokół transferu komunikatów, dzięki czemu komunikaty nie są tracone w transmisji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-133">The MSMQ queue managers implement a reliable message-transfer protocol so that messages are not lost in transmission.</span></span> <span data-ttu-id="c1f2a-134">Protokół może być natywny lub oparty na protokole SOAP, taki jak protokół SOAP Message Protocol (SRMP).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-134">The protocol can be either native or SOAP-based, such as the SOAP Reliable Message Protocol (SRMP).</span></span>  
  
 <span data-ttu-id="c1f2a-135">W usłudze MSMQ kolejki mogą być transakcyjne lub nietransakcyjne.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-135">In MSMQ, queues can be transactional or non-transactional.</span></span> <span data-ttu-id="c1f2a-136">Kolejka transakcyjna umożliwia przechwytywanie i dostarczanie komunikatów w transakcji, a następnie przechowywanie trwale w kolejce.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-136">A transactional queue allows messages to be captured and delivered in a transaction and then stored durably in the queue.</span></span> <span data-ttu-id="c1f2a-137">Komunikaty wysyłane do kolejki transakcyjnej są przesyłane dokładnie jeden raz w określonej kolejności.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-137">Messages sent to a transactional queue are transferred exactly once in order.</span></span> <span data-ttu-id="c1f2a-138">Kolejki nietransakcyjnej można użyć do wysyłania zarówno komunikatów nietrwałych, jak i trwałych.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-138">You can use a non-transactional queue to send both volatile and durable messages.</span></span> <span data-ttu-id="c1f2a-139">Komunikat wysłany do kolejki nietransakcyjnej nie zawiera żadnych wiarygodnych gwarancji transferu; w ten sposób komunikaty mogą być tracone.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-139">A message sent to a non-transactional queue does not carry any reliable transfer assurances; thus, messages can be lost.</span></span>  
  
 <span data-ttu-id="c1f2a-140">Kolejki usługi MSMQ można także zabezpieczyć przy użyciu tożsamości systemu Windows zarejestrowanej w usłudze katalogowej Active Directory.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-140">MSMQ queues can also be secured using a Windows identity registered with the Active Directory directory service.</span></span> <span data-ttu-id="c1f2a-141">Podczas instalowania usługi MSMQ można zainstalować integrację Active Directory, która wymaga, aby komputer był częścią sieci domeny systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-141">When installing MSMQ, you can install Active Directory integration, which requires the computer to be part of a Windows domain network.</span></span>  
  
 <span data-ttu-id="c1f2a-142">Aby uzyskać więcej informacji na temat usługi MSMQ, zobacz [Instalowanie usługi kolejkowania komunikatów (MSMQ)](../samples/installing-message-queuing-msmq.md).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-142">For more information about MSMQ, see [Installing Message Queuing (MSMQ)](../samples/installing-message-queuing-msmq.md).</span></span>  
  
### <a name="netmsmqbinding"></a><span data-ttu-id="c1f2a-143">NetMsmqBinding</span><span class="sxs-lookup"><span data-stu-id="c1f2a-143">NetMsmqBinding</span></span>  
 <span data-ttu-id="c1f2a-144">[\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md)Jest to, że powiązanie z kolejką WCF zapewnia dwa punkty końcowe WCF do komunikowania się przy użyciu usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-144">The [\<netMsmqBinding>](../../configure-apps/file-schema/wcf/netmsmqbinding.md) is the queued binding WCF provides for two WCF endpoints to communicate using MSMQ.</span></span> <span data-ttu-id="c1f2a-145">W związku z tym, uwidacznia właściwości, które są specyficzne dla usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-145">The binding, therefore, exposes properties that are specific to MSMQ.</span></span> <span data-ttu-id="c1f2a-146">Jednak nie wszystkie funkcje i właściwości usługi MSMQ są uwidocznione w programie `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-146">However, not all MSMQ features and properties are exposed in the `NetMsmqBinding`.</span></span> <span data-ttu-id="c1f2a-147">Kompaktowanie `NetMsmqBinding` ma optymalny zestaw funkcji, które najlepiej znaleźć w większości klientów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-147">The compact `NetMsmqBinding` is designed with an optimal set of features that most customers should find sufficient.</span></span>  
  
 <span data-ttu-id="c1f2a-148">`NetMsmqBinding`Manifestuje podstawowe koncepcje związane z kolejką omawiane w tym zakresie w postaci właściwości powiązań.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-148">The `NetMsmqBinding` manifests the core queuing concepts discussed thus far in the form of properties on the bindings.</span></span> <span data-ttu-id="c1f2a-149">Te właściwości z kolei komunikują się z usługą MSMQ w celu przesyłania i dostarczania komunikatów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-149">These properties, in turn, communicate to MSMQ how to transfer and deliver the messages.</span></span> <span data-ttu-id="c1f2a-150">Dyskusje dotyczące kategorii właściwości znajdują się w poniższych sekcjach.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-150">A discussion of the property categories is in the following sections.</span></span> <span data-ttu-id="c1f2a-151">Aby uzyskać więcej informacji, zobacz tematy dotyczące pojęć, które bardziej szczegółowo opisują określone właściwości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-151">For more information, see the conceptual topics that describe specific properties more completely.</span></span>  
  
#### <a name="exactlyonce-and-durable-properties"></a><span data-ttu-id="c1f2a-152">Właściwości ExactlyOnce i trwałe</span><span class="sxs-lookup"><span data-stu-id="c1f2a-152">ExactlyOnce and Durable Properties</span></span>  
 <span data-ttu-id="c1f2a-153">`ExactlyOnce`Właściwości i `Durable` wpływają na sposób przesyłania komunikatów między kolejkami:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-153">The `ExactlyOnce` and `Durable` properties affect how messages are transferred between queues:</span></span>  
  
- <span data-ttu-id="c1f2a-154">`ExactlyOnce`: Po ustawieniu wartości `true` (domyślnie) kanał umieszczony w kolejce gwarantuje, że komunikat, jeśli został dostarczony, nie jest zduplikowany.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-154">`ExactlyOnce`: When set to `true` (the default), the queued channel ensures that the message, if delivered, is not duplicated.</span></span> <span data-ttu-id="c1f2a-155">Gwarantuje również, że wiadomość nie zostanie utracona.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-155">It also ensures that the message is not lost.</span></span> <span data-ttu-id="c1f2a-156">Jeśli wiadomość nie może zostać dostarczona lub komunikat czasu wygaśnięcia komunikatu wygasa przed dostarczeniem komunikatu, komunikat o błędzie i Przyczyna niepowodzenia dostarczenia są rejestrowane w kolejce utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-156">If the message cannot be delivered, or the message Time-To Live expires before the message can be delivered, the failed message along with the delivery failure reason is recorded in a dead-letter queue.</span></span> <span data-ttu-id="c1f2a-157">Po ustawieniu na `false` , kanał umieszczony w kolejce sprawia, że jest to konieczne.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-157">When set to `false`, the queued channel makes an effort to transfer the message.</span></span> <span data-ttu-id="c1f2a-158">W takim przypadku można opcjonalnie wybrać kolejkę utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-158">In this case, you can optionally choose a dead-letter queue.</span></span>  
  
- <span data-ttu-id="c1f2a-159">`Durable:`Po ustawieniu wartości `true` (domyślnie) kanał umieszczony w kolejce gwarantuje, że usługa MSMQ będzie przechowywać komunikat trwale na dysku.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-159">`Durable:` When set to `true` (the default), the queued channel ensures that MSMQ stores the message durably on disk.</span></span> <span data-ttu-id="c1f2a-160">W takim przypadku, jeśli usługa MSMQ została zatrzymana i ponownie uruchomiona, komunikaty na dysku są przesyłane do kolejki docelowej lub dostarczane do usługi.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-160">Thus, if the MSMQ service were to stop and restart, the messages on disk is transferred to the target queue or delivered to the service.</span></span> <span data-ttu-id="c1f2a-161">Gdy jest ustawiona na `false` , komunikaty są przechowywane w magazynie nietrwałym i są tracone po zatrzymywaniu i ponownym uruchomieniu usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-161">When set to `false`, the messages are stored in volatile store and are lost on stopping and restarting the MSMQ service.</span></span>  
  
 <span data-ttu-id="c1f2a-162">W celu zapewnienia `ExactlyOnce` niezawodnego transferu Usługa MSMQ wymaga, aby Kolejka była transakcyjna.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-162">For `ExactlyOnce` reliable transfer, MSMQ requires the queue to be transactional.</span></span> <span data-ttu-id="c1f2a-163">Ponadto usługa MSMQ wymaga transakcji do odczytu z kolejki transakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-163">Also, MSMQ requires a transaction to read from a transactional queue.</span></span> <span data-ttu-id="c1f2a-164">W związku z tym podczas korzystania z programu należy `NetMsmqBinding` pamiętać, że transakcja jest wymagana do wysyłania i odbierania komunikatów, gdy `ExactlyOnce` jest ustawiona na `true` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-164">As such, when you use the `NetMsmqBinding`, remember that a transaction is required to send or receive messages when `ExactlyOnce` is set to `true`.</span></span> <span data-ttu-id="c1f2a-165">Podobnie usługa MSMQ wymaga, aby Kolejka była nietransakcyjna dla gwarancji najlepszego wysiłku, na przykład gdy `ExactlyOnce` jest `false` i dla nietrwałej obsługi komunikatów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-165">Similarly, MSMQ requires the queue to be non-transactional for best-effort assurances, such as when `ExactlyOnce` is `false` and for volatile messaging.</span></span> <span data-ttu-id="c1f2a-166">W ten sposób, gdy ustawienie `ExactlyOnce` `false` lub trwałe na `false` , nie można wysyłać ani odbierać przy użyciu transakcji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-166">Thus, when setting `ExactlyOnce` to `false` or durable to `false`, you cannot send or receive using a transaction.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="c1f2a-167">Upewnij się, że na podstawie ustawień w powiązaniach utworzono poprawną kolejkę (transakcyjną lub nietransakcyjną).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-167">Ensure that the correct queue (transactional or non-transactional) is created based on settings in the bindings.</span></span> <span data-ttu-id="c1f2a-168">Jeśli `ExactlyOnce` jest `true` , użyj kolejki transakcyjnej; w przeciwnym razie użyj kolejki nietransakcyjnej.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-168">If `ExactlyOnce` is `true`, use a transactional queue; otherwise, use a non-transactional queue.</span></span>  
  
#### <a name="dead-letter-queue-properties"></a><span data-ttu-id="c1f2a-169">Właściwości kolejki utraconych wiadomości</span><span class="sxs-lookup"><span data-stu-id="c1f2a-169">Dead-Letter Queue Properties</span></span>  
 <span data-ttu-id="c1f2a-170">Kolejka utraconych wiadomości służy do przechowywania komunikatów, które kończą się niepowodzeniem.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-170">The dead-letter queue is used to store messages that fail delivery.</span></span> <span data-ttu-id="c1f2a-171">Użytkownik może napisać logikę kompensowania, która odczytuje komunikaty z kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-171">The user can write compensating logic that reads messages out of the dead-letter queue.</span></span>  
  
 <span data-ttu-id="c1f2a-172">Wiele systemów kolejkowania zapewnia kolejkę utraconych wiadomości w całej sieci.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-172">Many queuing systems provide for a system-wide dead-letter queue.</span></span> <span data-ttu-id="c1f2a-173">Usługa MSMQ zapewnia nietransakcyjną kolejkę utraconych wiadomości dla komunikatów, które kończą się nietransakcyjnymi kolejkami, oraz kolejką utraconych wiadomości transakcyjnych w całej systemie dla komunikatów, które kończą się niepowodzeniem w kolejkach transakcyjnych.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-173">MSMQ provides a system-wide non-transactional dead-letter queue for messages that fail delivery to non-transactional queues and a system-wide transactional dead-letter queue for messages that fail delivery to transactional queues.</span></span>  
  
 <span data-ttu-id="c1f2a-174">Jeśli wielu klientów wysyła komunikaty do różnych kolejek docelowych, współużytkują usługę MSMQ, wszystkie komunikaty wysyłane przez klientów przejdą do tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-174">If multiple clients sending messages to different target queues share the MSMQ service, all messages sent by the clients go to the same dead-letter queue.</span></span> <span data-ttu-id="c1f2a-175">Nie zawsze jest to zalecane.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-175">This is not always preferable.</span></span> <span data-ttu-id="c1f2a-176">W celu uzyskania lepszej izolacji Funkcja WCF i usługa MSMQ w systemie Windows Vista zapewniają niestandardową kolejkę utraconych wiadomości (lub kolejkę utraconych danych specyficznych dla aplikacji), którą użytkownik może określić do przechowywania wiadomości, które nie są dostarczane.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-176">For better isolation, WCF and MSMQ in Windows Vista provide a custom dead-letter queue (or application-specific dead-letter queue) that the user can specify to store messages that fail delivery.</span></span> <span data-ttu-id="c1f2a-177">W związku z tym różni klienci nie korzystają z tej samej kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-177">Therefore, different clients do not share the same dead-letter queue.</span></span>  
  
 <span data-ttu-id="c1f2a-178">Powiązanie ma dwie właściwości zainteresowania:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-178">The binding has two properties of interest:</span></span>  
  
- <span data-ttu-id="c1f2a-179">`DeadLetterQueue`: Ta właściwość jest wyliczeniem wskazującym, czy zażądano kolejki utraconych wiadomości.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-179">`DeadLetterQueue`: This property is an enumeration that indicates whether a dead-letter queue is requested.</span></span> <span data-ttu-id="c1f2a-180">Wyliczenie zawiera również rodzaj kolejki utraconych wiadomości, jeśli jest wymagana.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-180">The enumeration also contains the kind of dead-letter queue, if one is requested.</span></span> <span data-ttu-id="c1f2a-181">Wartości to `None` , `System` , i `Custom` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-181">The values are `None`, `System`, and `Custom`.</span></span> <span data-ttu-id="c1f2a-182">Aby uzyskać więcej informacji o interpretacji tych właściwości, zobacz [Korzystanie z kolejek utraconych w celu obsługi błędów transferu komunikatów](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span><span class="sxs-lookup"><span data-stu-id="c1f2a-182">For more information about the interpretation of these properties, see [Using Dead-Letter Queues to Handle Message Transfer Failures](using-dead-letter-queues-to-handle-message-transfer-failures.md)</span></span>  
  
- <span data-ttu-id="c1f2a-183">`CustomDeadLetterQueue`: Ta właściwość jest adresem Uniform Resource Identifier (URI) kolejki utraconych wiadomości specyficznych dla aplikacji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-183">`CustomDeadLetterQueue`: This property is the Uniform Resource Identifier (URI) address of the application-specific dead-letter queue.</span></span> <span data-ttu-id="c1f2a-184">Jest to wymagane, jeśli `DeadLetterQueue` .`Custom`</span><span class="sxs-lookup"><span data-stu-id="c1f2a-184">This is required if `DeadLetterQueue`.`Custom`</span></span> <span data-ttu-id="c1f2a-185">jest wybierany.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-185">is chosen.</span></span>  
  
#### <a name="poison-message-handling-properties"></a><span data-ttu-id="c1f2a-186">Właściwości obsługi skażonych komunikatów</span><span class="sxs-lookup"><span data-stu-id="c1f2a-186">Poison Message Handling properties</span></span>  
 <span data-ttu-id="c1f2a-187">Gdy usługa odczytuje komunikaty z kolejki docelowej w ramach transakcji, usługa może nie przetwarzać komunikatu z różnych powodów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-187">When the service reads messages from the target queue under a transaction, the service may fail to process the message for various reasons.</span></span> <span data-ttu-id="c1f2a-188">Komunikat jest następnie ponownie umieszczany w kolejce, aby można go było odczytać.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-188">The message is then put back into the queue to be read again.</span></span> <span data-ttu-id="c1f2a-189">Aby zająć się niepowtarzalnymi komunikatami, zestaw właściwości obsługujących trującą wiadomość można skonfigurować w powiązaniu.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-189">To deal with messages that fail repeatedly, a set of poison-message handling properties can be configured in the binding.</span></span> <span data-ttu-id="c1f2a-190">Istnieją cztery właściwości: `ReceiveRetryCount` , `MaxRetryCycles` , `RetryCycleDelay` , i `ReceiveErrorHandling` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-190">There are four properties: `ReceiveRetryCount`, `MaxRetryCycles`, `RetryCycleDelay`, and `ReceiveErrorHandling`.</span></span> <span data-ttu-id="c1f2a-191">Aby uzyskać więcej informacji o tych właściwościach, zobacz [Obsługa skażonych komunikatów](poison-message-handling.md).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-191">For more information about these properties, see [Poison Message Handling](poison-message-handling.md).</span></span>  
  
#### <a name="security-properties"></a><span data-ttu-id="c1f2a-192">Właściwości zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="c1f2a-192">Security Properties</span></span>  
 <span data-ttu-id="c1f2a-193">Usługa MSMQ uwidacznia własny model zabezpieczeń, taki jak listy kontroli dostępu (ACL) w kolejce lub wysyła uwierzytelnione komunikaty.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-193">MSMQ exposes its own security model, such as access control lists (ACLs) on a queue or sending authenticated messages.</span></span> <span data-ttu-id="c1f2a-194">`NetMsmqBinding`Uwidacznia te właściwości zabezpieczeń w ramach swoich ustawień zabezpieczeń transportu.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-194">The `NetMsmqBinding` exposes these security properties as part of its transport security settings.</span></span> <span data-ttu-id="c1f2a-195">Istnieją dwie właściwości powiązania dla zabezpieczeń transportu: `MsmqAuthenticationMode` i `MsmqProtectionLevel` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-195">There are two properties in the binding for transport security: `MsmqAuthenticationMode` and `MsmqProtectionLevel`.</span></span> <span data-ttu-id="c1f2a-196">Ustawienia w tych właściwościach zależą od konfiguracji usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-196">Settings in these properties depend on how MSMQ is configured.</span></span> <span data-ttu-id="c1f2a-197">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów za pomocą zabezpieczeń transportu](securing-messages-using-transport-security.md).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-197">For more information, see [Securing Messages Using Transport Security](securing-messages-using-transport-security.md).</span></span>  
  
 <span data-ttu-id="c1f2a-198">Oprócz zabezpieczeń transportu rzeczywisty komunikat protokołu SOAP może być zabezpieczony przy użyciu zabezpieczeń komunikatów.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-198">In addition to transport security, the actual SOAP message itself can be secured using message security.</span></span> <span data-ttu-id="c1f2a-199">Aby uzyskać więcej informacji, zobacz [Zabezpieczanie komunikatów przy użyciu zabezpieczeń komunikatów](securing-messages-using-message-security.md).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-199">For more information, see [Securing Messages Using Message Security](securing-messages-using-message-security.md).</span></span>  
  
 <span data-ttu-id="c1f2a-200">`MsmqTransportSecurity`udostępnia również dwie właściwości `MsmqEncryptionAlgorithm` i `MsmqHashAlgorithm` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-200">`MsmqTransportSecurity` also exposes two properties, `MsmqEncryptionAlgorithm` and `MsmqHashAlgorithm`.</span></span> <span data-ttu-id="c1f2a-201">Są to wyliczenia różnych algorytmów, które umożliwiają wybranie opcji przenoszenia komunikatów i wyznaczania wartości skrótu sygnatur do kolejki.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-201">These are enumerations of different algorithms to choose for queue-to-queue transfer encryption of messages and hashing of the signatures.</span></span>  
  
#### <a name="other-properties"></a><span data-ttu-id="c1f2a-202">Inne właściwości</span><span class="sxs-lookup"><span data-stu-id="c1f2a-202">Other Properties</span></span>  
 <span data-ttu-id="c1f2a-203">Oprócz powyższych właściwości inne właściwości specyficzne dla usługi MSMQ, które są widoczne w ramach powiązania, obejmują:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-203">In addition to the preceding properties, other MSMQ-specific properties exposed in the binding include:</span></span>  
  
- <span data-ttu-id="c1f2a-204">`UseSourceJournal`: Właściwość wskazująca, że rejestrowanie źródłowe jest włączone.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-204">`UseSourceJournal`: A property to indicate that source journaling is turned on.</span></span> <span data-ttu-id="c1f2a-205">Rejestrowanie źródłowe jest funkcją usługi MSMQ, która zachowuje śledzenie komunikatów, które zostały pomyślnie przesłane z kolejki transmisji.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-205">Source journaling is an MSMQ feature that keeps track of messages that have been successfully transmitted from the transmission queue.</span></span>  
  
- <span data-ttu-id="c1f2a-206">`UseMsmqTracing`: Właściwość wskazująca, że śledzenie usługi MSMQ jest włączone.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-206">`UseMsmqTracing`: A property to indicate that MSMQ tracing is turned on.</span></span> <span data-ttu-id="c1f2a-207">Śledzenie usługi MSMQ wysyła komunikaty raportu do kolejki raportu za każdym razem, gdy komunikat opuszcza lub dociera do komputera obsługującego Menedżera kolejki usługi MSMQ.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-207">MSMQ tracing sends report messages to a report queue each time a message leaves or arrives at a machine hosting an MSMQ queue manager.</span></span>  
  
- <span data-ttu-id="c1f2a-208">`QueueTransferProtocol`: Wyliczenie protokołu, który ma być używany do transferów komunikatów z kolejki.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-208">`QueueTransferProtocol`: An enumeration of the protocol to use for queue-to-queue message transfers.</span></span> <span data-ttu-id="c1f2a-209">Usługa MSMQ implementuje natywny protokół przesyłania kolejek do kolejki i protokół oparty na protokole SOAP o nazwie SRMP.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-209">MSMQ implements a native queue-to-queue transfer protocol and a SOAP-based protocol called SOAP Reliable Messaging Protocol (SRMP).</span></span> <span data-ttu-id="c1f2a-210">Protokół SRMP jest używany w przypadku przesyłania kolejek do kolejki przy użyciu protokołu HTTP.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-210">SRMP is used when using HTTP transport for queue-to-queue transfers.</span></span> <span data-ttu-id="c1f2a-211">Protokół SRMP Secure jest używany w przypadku przesyłania kolejek do kolejki przy użyciu protokołu HTTPS.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-211">SRMP secure is used when using HTTPS for queue-to-queue transfers.</span></span>  
  
- <span data-ttu-id="c1f2a-212">`UseActiveDirectory`: Wartość logiczna określająca, czy Active Directory musi być używana do rozpoznawania adresów w kolejce.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-212">`UseActiveDirectory`: A Boolean value to indicate whether the Active Directory must be used for queue address resolution.</span></span> <span data-ttu-id="c1f2a-213">Domyślnie to ustawienie jest wyłączone.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-213">By default, this is off.</span></span> <span data-ttu-id="c1f2a-214">Aby uzyskać więcej informacji, zobacz [punkty końcowe usługi i adresowanie kolejki](service-endpoints-and-queue-addressing.md).</span><span class="sxs-lookup"><span data-stu-id="c1f2a-214">For more information, see [Service Endpoints and Queue Addressing](service-endpoints-and-queue-addressing.md).</span></span>  
  
### <a name="msmqintegrationbinding"></a><span data-ttu-id="c1f2a-215">MsmqIntegrationBinding</span><span class="sxs-lookup"><span data-stu-id="c1f2a-215">MsmqIntegrationBinding</span></span>  
 <span data-ttu-id="c1f2a-216">`MsmqIntegrationBinding`Jest używany, gdy punkt końcowy WCF ma komunikować się z istniejącą aplikacją MSMQ zapisaną w interfejsach API języka C, C++, com lub system. Messaging.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-216">The `MsmqIntegrationBinding` is used when you want a WCF endpoint to communicate with an existing MSMQ application written in C, C++, COM, or System.Messaging APIs.</span></span>  
  
 <span data-ttu-id="c1f2a-217">Właściwości powiązania są takie same jak dla elementu `NetMsmqBinding` .</span><span class="sxs-lookup"><span data-stu-id="c1f2a-217">The binding properties are the same as for `NetMsmqBinding`.</span></span> <span data-ttu-id="c1f2a-218">Jednak obowiązują następujące różnice:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-218">However, the following differences apply:</span></span>  
  
- <span data-ttu-id="c1f2a-219">Kontrakt operacji dla programu `MsmqIntegrationBinding` jest ograniczony do pobierania pojedynczego parametru typu, w <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> którym parametr typu jest typem treści.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-219">The operation contract for `MsmqIntegrationBinding` is restricted to taking a single parameter of type <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> where the type parameter is the body type.</span></span>  
  
- <span data-ttu-id="c1f2a-220">Wiele właściwości natywnych komunikatów usługi MSMQ jest narażonych na <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> użytek.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-220">Much of MSMQ native message properties are exposed in the <xref:System.ServiceModel.MsmqIntegration.MsmqMessage%601> for use.</span></span>  
  
- <span data-ttu-id="c1f2a-221">W celu ułatwienia serializacji i deserializacji treści wiadomości są udostępniane serializatory, takie jak XML i ActiveX.</span><span class="sxs-lookup"><span data-stu-id="c1f2a-221">To help with serialization and deserialization of the message body, serializers such as XML and ActiveX are provided.</span></span>  
  
### <a name="sample-code"></a><span data-ttu-id="c1f2a-222">Przykładowy kod</span><span class="sxs-lookup"><span data-stu-id="c1f2a-222">Sample Code</span></span>  
 <span data-ttu-id="c1f2a-223">Instrukcje krok po kroku dotyczące pisania usług WCF korzystających z usługi MSMQ można znaleźć w następujących tematach:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-223">For step by step instructions on how to write WCF services that use MSMQ see the following topics:</span></span>  
  
- [<span data-ttu-id="c1f2a-224">Instrukcje: wymiana komunikatów z punktami końcowymi programu WCF i aplikacjami do obsługi kolejek komunikatów</span><span class="sxs-lookup"><span data-stu-id="c1f2a-224">How to: Exchange Messages with WCF Endpoints and Message Queuing Applications</span></span>](how-to-exchange-messages-with-wcf-endpoints-and-message-queuing-applications.md)  
  
- [<span data-ttu-id="c1f2a-225">Instrukcje: wymiana komunikatów znajdujących się w kolejce z punktami końcowymi WCF</span><span class="sxs-lookup"><span data-stu-id="c1f2a-225">How to: Exchange Queued Messages with WCF Endpoints</span></span>](how-to-exchange-queued-messages-with-wcf-endpoints.md)  
  
 <span data-ttu-id="c1f2a-226">Aby uzyskać przykładowy kod ilustrujący użycie usługi MSMQ w programie WCF, zobacz następujące tematy:</span><span class="sxs-lookup"><span data-stu-id="c1f2a-226">For a completed code sample illustrating the use of MSMQ in WCF see the following topics:</span></span>  
  
- [<span data-ttu-id="c1f2a-227">Transakcyjne powiązanie MSMQ</span><span class="sxs-lookup"><span data-stu-id="c1f2a-227">Transacted MSMQ Binding</span></span>](../samples/transacted-msmq-binding.md)  
  
- [<span data-ttu-id="c1f2a-228">Komunikacja za pomocą nietrwałych kolejek</span><span class="sxs-lookup"><span data-stu-id="c1f2a-228">Volatile Queued Communication</span></span>](../samples/volatile-queued-communication.md)  
  
- [<span data-ttu-id="c1f2a-229">Kolejki utraconych komunikatów</span><span class="sxs-lookup"><span data-stu-id="c1f2a-229">Dead Letter Queues</span></span>](../samples/dead-letter-queues.md)  
  
- [<span data-ttu-id="c1f2a-230">Sesje i kolejki</span><span class="sxs-lookup"><span data-stu-id="c1f2a-230">Sessions and Queues</span></span>](../samples/sessions-and-queues.md)  
  
- [<span data-ttu-id="c1f2a-231">Komunikacja dwukierunkowa</span><span class="sxs-lookup"><span data-stu-id="c1f2a-231">Two-Way Communication</span></span>](../samples/two-way-communication.md)
  
- [<span data-ttu-id="c1f2a-232">SRMP</span><span class="sxs-lookup"><span data-stu-id="c1f2a-232">SRMP</span></span>](../samples/srmp.md)  
  
- [<span data-ttu-id="c1f2a-233">Zabezpieczenia komunikatów w ramach kolejkowania komunikatów</span><span class="sxs-lookup"><span data-stu-id="c1f2a-233">Message Security over Message Queuing</span></span>](../samples/message-security-over-message-queuing.md)  
  
## <a name="see-also"></a><span data-ttu-id="c1f2a-234">Zobacz też</span><span class="sxs-lookup"><span data-stu-id="c1f2a-234">See also</span></span>

- [<span data-ttu-id="c1f2a-235">Punkty końcowe usługi i adresowanie kolejki</span><span class="sxs-lookup"><span data-stu-id="c1f2a-235">Service Endpoints and Queue Addressing</span></span>](service-endpoints-and-queue-addressing.md)
- [<span data-ttu-id="c1f2a-236">Sieć Web hostująca aplikację zakolejkowaną</span><span class="sxs-lookup"><span data-stu-id="c1f2a-236">Web Hosting a Queued Application</span></span>](web-hosting-a-queued-application.md)
