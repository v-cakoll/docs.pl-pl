---
title: Łączenie kontenerów oraz metod bezserwerowych dla usług natywnych w chmurze
description: Łączenie kontenerów i Kubernetes za pomocą podejścia bezserwerowego
ms.date: 05/13/2020
ms.openlocfilehash: 67eee89659026db06eb16ef6f1154ab6935725a4
ms.sourcegitcommit: 27db07ffb26f76912feefba7b884313547410db5
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 05/19/2020
ms.locfileid: "83614204"
---
# <a name="combining-containers-and-serverless-approaches"></a><span data-ttu-id="2831a-103">Łączenie kontenerów i rozwiązań bezserwerowych</span><span class="sxs-lookup"><span data-stu-id="2831a-103">Combining containers and serverless approaches</span></span>

<span data-ttu-id="2831a-104">Aplikacje natywne w chmurze zwykle implementują usługi korzystające z kontenerów i aranżacji.</span><span class="sxs-lookup"><span data-stu-id="2831a-104">Cloud-native applications typically implement services leveraging containers and orchestration.</span></span> <span data-ttu-id="2831a-105">Często istnieje możliwość uwidocznienia niektórych usług aplikacji jako Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="2831a-105">There are often opportunities to expose some of the application's services as Azure Functions.</span></span> <span data-ttu-id="2831a-106">Jednak w przypadku aplikacji natywnej w chmurze wdrożonej w usłudze Kubernetes warto wykorzystać Azure Functions w tym samym zestawie narzędzi.</span><span class="sxs-lookup"><span data-stu-id="2831a-106">However, with a cloud-native app deployed to Kubernetes, it would be nice to leverage Azure Functions within this same toolset.</span></span> <span data-ttu-id="2831a-107">Na szczęście można zawijać Azure Functions wewnątrz kontenerów platformy Docker i wdrażać je przy użyciu tych samych procesów i narzędzi, co w przypadku pozostałej części aplikacji opartej na Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="2831a-107">Fortunately, you can wrap Azure Functions inside Docker containers and deploy them using the same processes and tools as the rest of your Kubernetes-based app.</span></span>

## <a name="when-does-it-make-sense-to-use-containers-with-serverless"></a><span data-ttu-id="2831a-108">Kiedy warto używać kontenerów z bezserwerowym użyciem?</span><span class="sxs-lookup"><span data-stu-id="2831a-108">When does it make sense to use containers with serverless?</span></span>

<span data-ttu-id="2831a-109">Funkcja platformy Azure nie ma informacji o platformie, w której została wdrożona.</span><span class="sxs-lookup"><span data-stu-id="2831a-109">Your Azure Function has no knowledge of the platform on which it's deployed.</span></span> <span data-ttu-id="2831a-110">W przypadku niektórych scenariuszy mogą istnieć określone wymagania i trzeba dostosować środowisko, w którym zostanie uruchomiony kod funkcji.</span><span class="sxs-lookup"><span data-stu-id="2831a-110">For some scenarios, you may have specific requirements and need to customize the environment on which your function code will run.</span></span> <span data-ttu-id="2831a-111">Potrzebny jest obraz niestandardowy obsługujący zależności lub Konfiguracja nieobsługiwana przez domyślny obraz.</span><span class="sxs-lookup"><span data-stu-id="2831a-111">You'll need a custom image that supports dependencies or a configuration not supported by the default image.</span></span> <span data-ttu-id="2831a-112">W takich przypadkach warto wdrożyć funkcję w niestandardowym kontenerze platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="2831a-112">In these cases, it makes sense to deploy your function in a custom Docker container.</span></span>

## <a name="when-should-you-avoid-using-containers-with-azure-functions"></a><span data-ttu-id="2831a-113">Kiedy należy unikać używania kontenerów z Azure Functionsami?</span><span class="sxs-lookup"><span data-stu-id="2831a-113">When should you avoid using containers with Azure Functions?</span></span>

<span data-ttu-id="2831a-114">Jeśli chcesz korzystać z rozliczeń zużycia, nie będzie można uruchamiać funkcji w kontenerze.</span><span class="sxs-lookup"><span data-stu-id="2831a-114">If you want to use consumption billing, you won't be able to run your function in a container.</span></span> <span data-ttu-id="2831a-115">Co więcej, jeśli funkcja zostanie wdrożona w klastrze Kubernetes, nie będzie już można korzystać z wbudowanego skalowania dostarczonego przez Azure Functions.</span><span class="sxs-lookup"><span data-stu-id="2831a-115">What's more, if you deploy your function to a Kubernetes cluster, you'll no longer benefit from the built-in scaling provided by Azure Functions.</span></span> <span data-ttu-id="2831a-116">Musisz użyć funkcji skalowania Kubernetes, opisanej wcześniej w tym rozdziale.</span><span class="sxs-lookup"><span data-stu-id="2831a-116">You'll need to use Kubernetes' scaling features, described earlier in this chapter.</span></span>

## <a name="how-to-combine-serverless-and-docker-containers"></a><span data-ttu-id="2831a-117">Jak połączyć kontenery bezserwerowe i platformy Docker</span><span class="sxs-lookup"><span data-stu-id="2831a-117">How to combine serverless and Docker containers</span></span>

<span data-ttu-id="2831a-118">Aby otoczyć funkcję platformy Azure w kontenerze platformy Docker, zainstaluj [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) a następnie uruchom następujące polecenie:</span><span class="sxs-lookup"><span data-stu-id="2831a-118">To wrap an Azure Function in a Docker container, install the [Azure Functions Core Tools](https://github.com/Azure/azure-functions-core-tools) and then run the following command:</span></span>

```console
func init ProjectName --worker-runtime dotnet --docker
```

<span data-ttu-id="2831a-119">Po utworzeniu projektu będzie on zawierał pliku dockerfile i środowisko uruchomieniowe procesu roboczego skonfigurowane do `dotnet` .</span><span class="sxs-lookup"><span data-stu-id="2831a-119">When the project is created, it will include a Dockerfile and the worker runtime configured to `dotnet`.</span></span> <span data-ttu-id="2831a-120">Teraz można tworzyć i testować funkcję lokalnie.</span><span class="sxs-lookup"><span data-stu-id="2831a-120">Now, you can create and test your function locally.</span></span> <span data-ttu-id="2831a-121">Kompiluj i uruchamiaj przy użyciu `docker build` `docker run` poleceń i.</span><span class="sxs-lookup"><span data-stu-id="2831a-121">Build and run it using the  `docker build` and `docker run` commands.</span></span> <span data-ttu-id="2831a-122">Aby uzyskać szczegółowe instrukcje dotyczące rozpoczynania tworzenia Azure Functions z obsługą platformy Docker, zobacz samouczek [Tworzenie funkcji w systemie Linux przy użyciu niestandardowego obrazu](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) .</span><span class="sxs-lookup"><span data-stu-id="2831a-122">For detailed steps to get started building Azure Functions with Docker support, see the [Create a function on Linux using a custom image](https://docs.microsoft.com/azure/azure-functions/functions-create-function-linux-custom-image) tutorial.</span></span>

## <a name="how-to-combine-serverless-and-kubernetes-with-keda"></a><span data-ttu-id="2831a-123">Łączenie bezserwerowe i Kubernetes z KEDA</span><span class="sxs-lookup"><span data-stu-id="2831a-123">How to combine serverless and Kubernetes with KEDA</span></span>

<span data-ttu-id="2831a-124">W tym rozdziale zaobserwowano, że platforma Azure Functions "automatycznie skaluje się w celu spełnienia wymagań.</span><span class="sxs-lookup"><span data-stu-id="2831a-124">In this chapter, you've seen that the Azure Functions' platform automatically scales out to meet demand.</span></span> <span data-ttu-id="2831a-125">W przypadku wdrażania funkcji kontenera w programie AKS jednak tracisz wbudowaną funkcję skalowania.</span><span class="sxs-lookup"><span data-stu-id="2831a-125">When deploying containerized functions to AKS, however, you lose the built-in scaling functionality.</span></span> <span data-ttu-id="2831a-126">Do ratowania jest [oparta Kubernetes zdarzeń (KEDA)](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span><span class="sxs-lookup"><span data-stu-id="2831a-126">To the rescue comes [Kubernetes-based Event Driven (KEDA)](https://docs.microsoft.com/azure/azure-functions/functions-kubernetes-keda).</span></span> <span data-ttu-id="2831a-127">Umożliwia precyzyjne Skalowanie automatyczne w celu `event-driven Kubernetes workloads,` uwzględnienia funkcji kontenerów.</span><span class="sxs-lookup"><span data-stu-id="2831a-127">It enables fine-grained autoscaling for `event-driven Kubernetes workloads,` including containerized functions.</span></span>

<span data-ttu-id="2831a-128">KEDA zapewnia funkcję skalowania sterowaną zdarzeniami do środowiska uruchomieniowego Functions w kontenerze platformy Docker.</span><span class="sxs-lookup"><span data-stu-id="2831a-128">KEDA provides event-driven scaling functionality to the Functions' runtime in a Docker container.</span></span> <span data-ttu-id="2831a-129">KEDA można skalować od zero wystąpień (gdy nie są wykonywane żadne zdarzenia) na `n instances` podstawie obciążenia.</span><span class="sxs-lookup"><span data-stu-id="2831a-129">KEDA can scale from zero instances (when no events are occurring) out to `n instances`, based on load.</span></span> <span data-ttu-id="2831a-130">Umożliwia automatyczne skalowanie przez udostępnienie metryk niestandardowych do skalowania automatycznego (Kubernetes).</span><span class="sxs-lookup"><span data-stu-id="2831a-130">It enables autoscaling by exposing custom metrics to the Kubernetes autoscaler (Horizontal Pod Autoscaler).</span></span> <span data-ttu-id="2831a-131">Używanie kontenerów funkcji z KEDA umożliwia replikowanie funkcji bezserwerowych w dowolnym klastrze Kubernetes.</span><span class="sxs-lookup"><span data-stu-id="2831a-131">Using Functions containers with KEDA makes it possible to replicate serverless function capabilities in any Kubernetes cluster.</span></span>

<span data-ttu-id="2831a-132">Warto zauważyć, że projekt KEDA jest teraz zarządzany przez natywną fundament w chmurze (CNCF).</span><span class="sxs-lookup"><span data-stu-id="2831a-132">It is worth noting that the KEDA project is now managed by the Cloud Native Computing Foundation (CNCF).</span></span>

>[!div class="step-by-step"]
><span data-ttu-id="2831a-133">[Poprzedni](leverage-serverless-functions.md) 
> [Dalej](deploy-containers-azure.md)</span><span class="sxs-lookup"><span data-stu-id="2831a-133">[Previous](leverage-serverless-functions.md)
[Next](deploy-containers-azure.md)</span></span>
