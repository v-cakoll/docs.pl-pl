---
title: Zabezpieczanie usług danych WCF
ms.date: 03/30/2017
dev_langs:
- csharp
- vb
helpviewer_keywords:
- securing application [WCF Data Services]
- WCF Data Services, security
ms.assetid: 99fc2baa-a040-4549-bc4d-f683d60298af
ms.openlocfilehash: 4dbfe286099ebd0da269ca7ec6e4587d0d8b2e03
ms.sourcegitcommit: 5988e9a29cedb8757320817deda3c08c6f44a6aa
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 04/28/2020
ms.locfileid: "82200070"
---
# <a name="securing-wcf-data-services"></a><span data-ttu-id="cc368-102">Zabezpieczanie usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="cc368-102">Securing WCF Data Services</span></span>

<span data-ttu-id="cc368-103">W tym artykule opisano zagadnienia dotyczące zabezpieczeń, które są specyficzne dla opracowywania, wdrażania i uruchamiania Usługi danych programu WCF i aplikacji, które obsługują usługę Open Data Protocol (OData).</span><span class="sxs-lookup"><span data-stu-id="cc368-103">This article describes security considerations that are specific to developing, deploying, and running WCF Data Services and applications that access services that support the Open Data Protocol (OData).</span></span> <span data-ttu-id="cc368-104">Należy również postępować zgodnie z zaleceniami dotyczącymi tworzenia bezpiecznych aplikacji .NET Framework.</span><span class="sxs-lookup"><span data-stu-id="cc368-104">You should also follow recommendations for creating secure .NET Framework applications.</span></span>  
  
<span data-ttu-id="cc368-105">Planując sposób zabezpieczania usługi OData opartej na Usługi danych programu WCF, należy rozwiązać zarówno uwierzytelnianie, proces odnajdywania i weryfikacji tożsamości podmiotu zabezpieczeń, jak i autoryzacji, a także proces ustalania, czy uwierzytelniony podmiot zabezpieczeń może uzyskać dostęp do żądanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="cc368-105">When planning how to secure a WCF Data Services-based OData service, you must address both authentication, the process of discovering and verifying the identity of a principal, and authorization, the process of determining whether an authenticated principal is allowed to access the requested resources.</span></span> <span data-ttu-id="cc368-106">Należy również wziąć pod uwagę, czy należy zaszyfrować komunikat przy użyciu protokołu SSL.</span><span class="sxs-lookup"><span data-stu-id="cc368-106">Also consider whether to encrypt the message by using SSL.</span></span>  
  
## <a name="authenticating-client-requests"></a><span data-ttu-id="cc368-107">Uwierzytelnianie żądań klientów</span><span class="sxs-lookup"><span data-stu-id="cc368-107">Authenticating Client Requests</span></span>  
<span data-ttu-id="cc368-108">Usługi danych programu WCF nie implementuje żadnego rodzaju uwierzytelniania, ale raczej opiera się na postanowieniach uwierzytelniania hosta usługi danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-108">WCF Data Services does not implement any kind of authentication of its own, but rather relies on the authentication provisions of the data service host.</span></span> <span data-ttu-id="cc368-109">Oznacza to, że usługa zakłada, że wszelkie odebrane żądania zostały już uwierzytelnione przez hosta sieci i że host prawidłowo zidentyfikował zasadę dla żądania odpowiednio za pośrednictwem interfejsów zapewnianych przez Usługi danych programu WCF.</span><span class="sxs-lookup"><span data-stu-id="cc368-109">This means that the service assumes that any request that it receives has already been authenticated by the network host and that the host has correctly identified the principle for the request appropriately via the interfaces provided by WCF Data Services.</span></span> <span data-ttu-id="cc368-110">Te opcje uwierzytelniania i podejścia opisano szczegółowo w wieloczęściowych [seriach OData i uwierzytelniania](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span><span class="sxs-lookup"><span data-stu-id="cc368-110">These authentication options and approaches are detailed in the multipart [OData and Authentication series](https://devblogs.microsoft.com/odata/?s=%22OData+and+authentication%22).</span></span>  
  
### <a name="authentication-options-for-a-wcf-data-service"></a><span data-ttu-id="cc368-111">Opcje uwierzytelniania dla usługi danych programu WCF</span><span class="sxs-lookup"><span data-stu-id="cc368-111">Authentication Options for a WCF Data Service</span></span>  
 <span data-ttu-id="cc368-112">W poniższej tabeli wymieniono niektóre z dostępnych mechanizmów uwierzytelniania, które pomagają w uwierzytelnieniu żądań kierowanych do usługi danych programu WCF.</span><span class="sxs-lookup"><span data-stu-id="cc368-112">The following table lists some of the authentication mechanisms that are available to help you authenticate requests to a WCF Data Service.</span></span>  
  
|<span data-ttu-id="cc368-113">Opcje uwierzytelniania</span><span class="sxs-lookup"><span data-stu-id="cc368-113">Authentication Options</span></span>|<span data-ttu-id="cc368-114">Opis</span><span class="sxs-lookup"><span data-stu-id="cc368-114">Description</span></span>|  
|----------------------------|-----------------|  
|<span data-ttu-id="cc368-115">Uwierzytelnianie anonimowe</span><span class="sxs-lookup"><span data-stu-id="cc368-115">Anonymous authentication</span></span>|<span data-ttu-id="cc368-116">Jeśli jest włączone uwierzytelnianie anonimowe HTTP, każdy podmiot zabezpieczeń jest w stanie połączyć się z usługą danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-116">When HTTP anonymous authentication is enabled, any principle is able to connect to the data service.</span></span> <span data-ttu-id="cc368-117">W przypadku dostępu anonimowego nie są wymagane poświadczenia.</span><span class="sxs-lookup"><span data-stu-id="cc368-117">Credentials are not required for anonymous access.</span></span> <span data-ttu-id="cc368-118">Użyj tej opcji tylko wtedy, gdy każdemu użytkownikowi chcesz zezwolić na dostęp do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-118">Use this option only when you want to allow anyone to access the data service.</span></span>|  
|<span data-ttu-id="cc368-119">Uwierzytelnianie podstawowe i szyfrowane</span><span class="sxs-lookup"><span data-stu-id="cc368-119">Basic and digest authentication</span></span>|<span data-ttu-id="cc368-120">Do uwierzytelnienia są wymagane poświadczenia składające się z nazwy użytkownika i hasła.</span><span class="sxs-lookup"><span data-stu-id="cc368-120">Credentials consisting of a user name and password are required for authentication.</span></span> <span data-ttu-id="cc368-121">Obsługuje uwierzytelnianie klientów nieopartych na systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="cc368-121">Supports authentication of non-Windows clients.</span></span> <span data-ttu-id="cc368-122">**Uwaga dotycząca zabezpieczeń:**  Poświadczenia uwierzytelniania podstawowego (nazwa użytkownika i hasło) są wysyłane w postaci jasnej i mogą być przechwytywane.</span><span class="sxs-lookup"><span data-stu-id="cc368-122">**Security Note:**  Basic authentication credentials (user name and password) are sent in the clear and can be intercepted.</span></span> <span data-ttu-id="cc368-123">W przypadku uwierzytelniania szyfrowanego wysyłana jest wartość skrótu oparta na podanych poświadczeniach, co sprawia, że jest ono bezpieczniejsze niż uwierzytelnianie podstawowe.</span><span class="sxs-lookup"><span data-stu-id="cc368-123">Digest authentication sends a hash based-on the supplied credentials, which makes it more secure than basic authentication.</span></span> <span data-ttu-id="cc368-124">Obie te metody są podatne na ataki man-in-middle.</span><span class="sxs-lookup"><span data-stu-id="cc368-124">Both are susceptible to man-in-the-middle attacks.</span></span> <span data-ttu-id="cc368-125">W przypadku korzystania z tych metod uwierzytelniania należy rozważyć szyfrowanie komunikacji między klientem a usługą danych przy użyciu protokołu Secure Sockets Layer (SSL).</span><span class="sxs-lookup"><span data-stu-id="cc368-125">When using these authentication methods, you should consider encrypting communication between client and the data service by using the Secure Sockets Layer (SSL).</span></span> <br /><br /> <span data-ttu-id="cc368-126">Program Microsoft Internet Information Services (IIS) zapewnia implementację zarówno uwierzytelniania podstawowego, jak i szyfrowanego dla żądań HTTP w aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cc368-126">Microsoft Internet Information Services (IIS) provides an implementation of both basic and digest authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="cc368-127">Ta implementacja dostawcy uwierzytelniania systemu Windows umożliwia aplikacji klienta programu .NET Framework podanie poświadczeń w nagłówku żądania HTTP skierowanego do usługi danych w celu bezproblemowego wynegocjowania uwierzytelnienia użytkownika systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="cc368-127">This Windows Authentication Provider implementation enables a .NET Framework client application to supply credentials in the HTTP header of the request to the data service to seamlessly negotiate authentication of a Windows user.</span></span> <span data-ttu-id="cc368-128">Aby uzyskać więcej informacji, zobacz [Informacje techniczne dotyczące uwierzytelniania szyfrowanego](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span><span class="sxs-lookup"><span data-stu-id="cc368-128">For more information, see [Digest Authentication Technical Reference](https://docs.microsoft.com/previous-versions/windows/it-pro/windows-server-2003/cc782794(v=ws.10)).</span></span><br /><br /> <span data-ttu-id="cc368-129">Jeśli chcesz, aby usługa danych korzystała z uwierzytelniania podstawowego na podstawie pewnej niestandardowej usługi uwierzytelniania, a nie poświadczeń systemu Windows, musisz zaimplementować niestandardowy moduł HTTP ADP.NET na potrzeby uwierzytelniania.</span><span class="sxs-lookup"><span data-stu-id="cc368-129">When you want to have your data service use basic authentication based on some custom authentication service and not Windows credentials, you must implement a custom ADP.NET HTTP Module for authentication.</span></span><br /><br /> <span data-ttu-id="cc368-130">Przykład używania niestandardowego schematu uwierzytelniania podstawowego z Usługi danych programu WCF można znaleźć w blogu wpis [OData i uwierzytelnianie — część 6 — niestandardowe uwierzytelnianie podstawowe](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span><span class="sxs-lookup"><span data-stu-id="cc368-130">For an example of how to use a custom basic authentication scheme with WCF Data Services, see the blog post [OData and Authentication – Part 6 – Custom Basic Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-6-custom-basic-authentication/).</span></span>|  
|<span data-ttu-id="cc368-131">Uwierzytelnianie systemu Windows</span><span class="sxs-lookup"><span data-stu-id="cc368-131">Windows authentication</span></span>|<span data-ttu-id="cc368-132">Poświadczenia oparte na systemie Windows są wymieniane przy użyciu protokołu NTLM lub Kerberos.</span><span class="sxs-lookup"><span data-stu-id="cc368-132">Windows-based credentials are exchanged by using NTLM or Kerberos.</span></span> <span data-ttu-id="cc368-133">Ten mechanizm jest bezpieczniejszy niż uwierzytelnianie podstawowe lub szyfrowane, ale wymaga, aby klient był aplikacją opartą na systemie Windows.</span><span class="sxs-lookup"><span data-stu-id="cc368-133">This mechanism is more secure than basic or digest authentication, but it requires that the client be a Windows-based application.</span></span> <span data-ttu-id="cc368-134">Usługi IIS zapewniają również implementację uwierzytelniania systemu Windows dla żądań HTTP w aplikacji ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cc368-134">IIS also provides an implementation of Windows authentication for HTTP requests in an ASP.NET application.</span></span> <span data-ttu-id="cc368-135">Aby uzyskać więcej informacji, zobacz [Omówienie uwierzytelniania formularzy ASP.NET](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="cc368-135">For more information, see [ASP.NET Forms Authentication Overview](https://docs.microsoft.com/previous-versions/aspnet/7t6b43z4(v=vs.100)).</span></span><br /><br /> <span data-ttu-id="cc368-136">Przykład korzystania z uwierzytelniania systemu Windows za pomocą Usługi danych programu WCF można znaleźć w blogu wpis [OData i uwierzytelnianie — część 2 — uwierzytelnianie systemu Windows](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span><span class="sxs-lookup"><span data-stu-id="cc368-136">For an example of how to use Windows authentication with WCF Data Services, see the blog post [OData and Authentication – Part 2 – Windows Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-2-windows-authentication/).</span></span>|  
|<span data-ttu-id="cc368-137">Uwierzytelnianie formularzy ASP.NET</span><span class="sxs-lookup"><span data-stu-id="cc368-137">ASP.NET forms authentication</span></span>|<span data-ttu-id="cc368-138">Uwierzytelnianie formularzy pozwala uwierzytelniać użytkowników przy użyciu własnego kodu, a następnie utrzymywać token uwierzytelniania w pliku cookie lub adresie URL strony.</span><span class="sxs-lookup"><span data-stu-id="cc368-138">Forms authentication lets you authenticate users by using your own code and then maintain an authentication token in a cookie or in the page URL.</span></span> <span data-ttu-id="cc368-139">Uwierzytelniasz nazwy i hasła użytkowników używających utworzonego przez Ciebie formularza logowania.</span><span class="sxs-lookup"><span data-stu-id="cc368-139">You authenticate the user name and password of your users using a login form that you create.</span></span> <span data-ttu-id="cc368-140">Nieuwierzytelnione żądania są przekierowywane na stronę logowania, gdzie użytkownik podaje poświadczenia i przesyła formularz.</span><span class="sxs-lookup"><span data-stu-id="cc368-140">Unauthenticated requests are redirected to a login page, where the user provides credentials and submits the form.</span></span> <span data-ttu-id="cc368-141">Jeśli aplikacja uwierzytelni żądanie, system wystawia bilet, który zawiera klucz umożliwiający ponowne ustalenie tożsamości dla kolejnych żądań.</span><span class="sxs-lookup"><span data-stu-id="cc368-141">If the application authenticates the request, the system issues a ticket that contains a key for reestablishing the identity for subsequent requests.</span></span> <span data-ttu-id="cc368-142">Aby uzyskać więcej informacji, zobacz temat [dostawca uwierzytelniania formularzy](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="cc368-142">For more information, see [Forms Authentication Provider](https://docs.microsoft.com/previous-versions/aspnet/9wff0kyh(v=vs.100)).</span></span> <span data-ttu-id="cc368-143">**Uwaga dotycząca zabezpieczeń:**  Domyślnie plik cookie zawierający bilet uwierzytelniania formularzy nie jest zabezpieczony, gdy używane jest uwierzytelnianie formularzy w aplikacji sieci Web ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cc368-143">**Security Note:**  By default, the cookie that contains the forms authentication ticket is not secured when you use forms authentication in a ASP.NET Web application.</span></span> <span data-ttu-id="cc368-144">Należy rozważyć wymaganie protokołu SSL w celu ochrony zarówno biletu uwierzytelniania, jak i początkowych poświadczeń logowania.</span><span class="sxs-lookup"><span data-stu-id="cc368-144">You should consider requiring SSL to protect both the authentication ticket and the initial login credentials.</span></span> <br /><br /> <span data-ttu-id="cc368-145">Przykład korzystania z uwierzytelniania formularzy przy użyciu Usługi danych programu WCF można znaleźć w blogu wpis [OData i uwierzytelnianie — część 7 — uwierzytelnianie formularzy](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span><span class="sxs-lookup"><span data-stu-id="cc368-145">For an example of how to use forms authentication with WCF Data Services, see the blog post [OData and Authentication – Part 7 – Forms Authentication](https://devblogs.microsoft.com/odata/odata-and-authentication-part-7-forms-authentication/).</span></span>|  
|<span data-ttu-id="cc368-146">Uwierzytelnianie oparte na oświadczeniach</span><span class="sxs-lookup"><span data-stu-id="cc368-146">Claims-based authentication</span></span>|<span data-ttu-id="cc368-147">W przypadku uwierzytelniania opartego na oświadczeniach usługa danych opiera się na zaufanej usłudze dostawcy tożsamości "innej firmy" w celu uwierzytelnienia użytkownika.</span><span class="sxs-lookup"><span data-stu-id="cc368-147">In claims-based authentication, the data service relies on a trusted "third-party" identity provider service to authenticate the user.</span></span> <span data-ttu-id="cc368-148">Dostawca tożsamości pozytywnie uwierzytelnia użytkownika, który żąda dostępu do zasobów usługi danych, i wystawia token udzielający dostępu do żądanych zasobów.</span><span class="sxs-lookup"><span data-stu-id="cc368-148">The identity provider positively authenticates the user that is requesting access to data service resources and issues a token that grants access to the requested resources.</span></span> <span data-ttu-id="cc368-149">Token ten jest następnie prezentowany usłudze danych, która udziela użytkownikowi dostępu na podstawie relacji zaufania z usługą tożsamości, która wystawiła token dostępu.</span><span class="sxs-lookup"><span data-stu-id="cc368-149">This token is then presented to the data service, which then grants access to the user based on the trust relationship with the identity service that issued the access token.</span></span><br /><br /> <span data-ttu-id="cc368-150">Zaletą używania dostawcy uwierzytelniania opartego na oświadczeniach jest to, że tej metody można używać do uwierzytelniania różnych typów klientów między domenami zaufania.</span><span class="sxs-lookup"><span data-stu-id="cc368-150">The benefit of using a claims-based authentication provider is that they can be used to authenticate various types of clients across trust domains.</span></span> <span data-ttu-id="cc368-151">Korzystając z takiego dostawcy innej firmy, usługa danych zdejmuje z siebie ciężar obsługi i uwierzytelniania użytkowników.</span><span class="sxs-lookup"><span data-stu-id="cc368-151">By employing such a third-party provider, a data service can offload the requirements of maintaining and authenticating users.</span></span> <span data-ttu-id="cc368-152">OAuth 2,0 to protokół uwierzytelniania oparty na oświadczeniach, który jest obsługiwany przez usługę Azure AppFabric Access Control do autoryzacji federacyjnej jako usługa.</span><span class="sxs-lookup"><span data-stu-id="cc368-152">OAuth 2.0 is a claims-based authentication protocol that is supported by Azure AppFabric Access Control for federated authorization as a service.</span></span> <span data-ttu-id="cc368-153">Protokół ten obsługuje usługi oparte na protokole REST.</span><span class="sxs-lookup"><span data-stu-id="cc368-153">This protocol supports REST-based services.</span></span> <span data-ttu-id="cc368-154">Przykład korzystania z protokołu OAuth 2,0 z Usługi danych programu WCF można znaleźć w blogu wpis [OData i uwierzytelnianie — część 8 — Zawijanie OAuth](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span><span class="sxs-lookup"><span data-stu-id="cc368-154">For an example of how to use OAuth 2.0 with WCF Data Services, see the blog post [OData and Authentication – Part 8 – OAuth WRAP](https://devblogs.microsoft.com/odata/odata-and-authentication-part-8-oauth-wrap/).</span></span>|  
  
<a name="clientAuthentication"></a>
### <a name="authentication-in-the-client-library"></a><span data-ttu-id="cc368-155">Uwierzytelnianie w bibliotece klienta</span><span class="sxs-lookup"><span data-stu-id="cc368-155">Authentication in the Client Library</span></span>  
 <span data-ttu-id="cc368-156">Domyślnie Biblioteka klienta Usługi danych programu WCF nie dostarcza poświadczeń podczas wykonywania żądania do usługi OData.</span><span class="sxs-lookup"><span data-stu-id="cc368-156">By default, the WCF Data Services client library does not supply credentials when making a request to an OData service.</span></span> <span data-ttu-id="cc368-157">Poświadczenia logowania są wymagane przez usługę danych do uwierzytelnienia użytkownika, ale te poświadczenia mogą być dostarczane w celu <xref:System.Net.NetworkCredential> uzyskania dostępu z <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> właściwości <xref:System.Data.Services.Client.DataServiceContext>, jak w poniższym przykładzie:</span><span class="sxs-lookup"><span data-stu-id="cc368-157">When login credentials are required by the data service to authenticate a user, these credentials can be supplied in a <xref:System.Net.NetworkCredential> accessed from the <xref:System.Data.Services.Client.DataServiceContext.Credentials%2A> property of the <xref:System.Data.Services.Client.DataServiceContext>, as in the following example:</span></span>  
  
```csharp  
// Set the client authentication credentials.  
context.Credentials =  
    new NetworkCredential(userName, password, domain);  
```  
  
```vb  
' Set the client authentication credentials.  
context.Credentials = _  
    New NetworkCredential(userName, password, domain)  
```  
  
 <span data-ttu-id="cc368-158">Aby uzyskać więcej informacji, zobacz [How to: Określanie poświadczeń klienta dla żądania usługi danych](specify-client-creds-for-a-data-service-request-wcf.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-158">For more information, see [How to: Specify Client Credentials for a Data Service Request](specify-client-creds-for-a-data-service-request-wcf.md).</span></span>  
  
 <span data-ttu-id="cc368-159">Gdy usługa danych wymaga poświadczeń logowania, których nie można określić za pomocą <xref:System.Net.NetworkCredential> obiektu, takiego jak token lub plik cookie oparty na oświadczeniach, należy ręcznie ustawić nagłówki w żądaniu HTTP, zazwyczaj w nagłówkach `Authorization` i `Cookie` .</span><span class="sxs-lookup"><span data-stu-id="cc368-159">When the data service requires login credentials that cannot be specified by using a <xref:System.Net.NetworkCredential> object, such as a claims-based token or cookie, you must manually set headers in the HTTP request, usually the `Authorization` and `Cookie` headers.</span></span> <span data-ttu-id="cc368-160">Aby uzyskać więcej informacji na temat tego rodzaju scenariusza uwierzytelniania, zobacz wpis w blogu dane [OData i uwierzytelnianie — część 3 — punkty zaczepienia opóźnienie](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span><span class="sxs-lookup"><span data-stu-id="cc368-160">For more information about this kind of authentication scenario, see the blog post [ OData and Authentication – Part 3 – ClientSide Hooks](https://devblogs.microsoft.com/odata/odata-and-authentication-part-3-clientside-hooks/).</span></span> <span data-ttu-id="cc368-161">Przykład sposobu ustawiania nagłówków HTTP w komunikacie żądania można znaleźć w temacie [How to: Set Headers in a Request Client](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-161">For an example of how to set HTTP headers in a request message, see [How to: Set Headers in the Client Request](how-to-set-headers-in-the-client-request-wcf-data-services.md).</span></span>  
  
## <a name="impersonation"></a><span data-ttu-id="cc368-162">Personifikacja</span><span class="sxs-lookup"><span data-stu-id="cc368-162">Impersonation</span></span>  
 <span data-ttu-id="cc368-163">Na ogół usługa danych uzyskuje dostęp do wymaganych zasobów, takich jak pliki na serwerze lub baza danych, przy użyciu poświadczeń procesu roboczego hostującego usługę danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-163">Generally, the data service accesses required resources, such as files on the server or a database, by using the credentials of the worker process that is hosting the data service.</span></span> <span data-ttu-id="cc368-164">W przypadku korzystania z personifikacji aplikacje ASP.NET mogą być wykonywane przy użyciu tożsamości systemu Windows (konta użytkownika) użytkownika wysyłającego żądanie.</span><span class="sxs-lookup"><span data-stu-id="cc368-164">When using impersonation, ASP.NET applications can execute with the Windows identity (user account) of the user making the request.</span></span> <span data-ttu-id="cc368-165">Personifikacja jest powszechnie stosowana w aplikacjach, które przy uwierzytelnieniu użytkownika opierają się na programie IIS, i poświadczenia tego podmiotu zabezpieczeń są używane do uzyskiwania dostępu do wymaganych zasobów.</span><span class="sxs-lookup"><span data-stu-id="cc368-165">Impersonation is commonly used in applications that rely on IIS to authenticate the user, and the credentials of this principle are used to access the required resources.</span></span> <span data-ttu-id="cc368-166">Aby uzyskać więcej informacji, zobacz [ASP.NET personifikacji](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span><span class="sxs-lookup"><span data-stu-id="cc368-166">For more information, see [ASP.NET Impersonation](https://docs.microsoft.com/previous-versions/aspnet/xh507fc5(v=vs.100)).</span></span>  
  
## <a name="configuring-data-service-authorization"></a><span data-ttu-id="cc368-167">Konfigurowanie autoryzacji usługi danych</span><span class="sxs-lookup"><span data-stu-id="cc368-167">Configuring Data Service Authorization</span></span>  
 <span data-ttu-id="cc368-168">Autoryzacja to udzielenie dostępu do zasobów aplikacji podmiotowi zabezpieczeń lub procesowi, który został zidentyfikowany na podstawie przeprowadzonego wcześniej pomyślnego uwierzytelnienia.</span><span class="sxs-lookup"><span data-stu-id="cc368-168">Authorization is the granting of access to application resources to a principle or process that is identified based on a previously successful authentication.</span></span> <span data-ttu-id="cc368-169">Ogólną praktyką jest udzielanie użytkownikom usługi danych tylko uprawnień wystarczających do wykonywania operacji wymaganych przez aplikacje klienta.</span><span class="sxs-lookup"><span data-stu-id="cc368-169">As a general practice, you should only grant sufficient rights to users of the data service to perform the operations required by client applications.</span></span>  
  
### <a name="restrict-access-to-data-service-resources"></a><span data-ttu-id="cc368-170">Ograniczanie dostępu do zasobów usługi danych</span><span class="sxs-lookup"><span data-stu-id="cc368-170">Restrict Access to Data Service Resources</span></span>  
 <span data-ttu-id="cc368-171">Domyślnie Usługi danych programu WCF umożliwia przyznawanie typowego dostępu do odczytu i zapisu do zasobów usługi danych (zestawów jednostek i operacji usługi) wszystkim użytkownikom, którzy mogą uzyskać dostęp do usługi danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-171">By default, WCF Data Services enables you to grant common read and write access against data service resources (entity set and service operations) to any user that is able to access the data service.</span></span> <span data-ttu-id="cc368-172">Reguły, które definiują prawa do odczytu i zapisu, można określić osobno dla każdego zestawu jednostek uwidacznianego przez usługę danych, a także dla każdej operacji usługi.</span><span class="sxs-lookup"><span data-stu-id="cc368-172">Rules that define read and write access can be defined separately for each entity set exposed by the data service, as well as to any service operations.</span></span> <span data-ttu-id="cc368-173">Zaleca się zawężenie zarówno praw do odczytu, jak i do zapisu tylko do zasobów, które są wymagane przez aplikację klienta.</span><span class="sxs-lookup"><span data-stu-id="cc368-173">We recommend limiting both read and write access to only the resources required by the client application.</span></span> <span data-ttu-id="cc368-174">Aby uzyskać więcej informacji, zobacz [minimalne wymagania dotyczące dostępu do zasobów](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span><span class="sxs-lookup"><span data-stu-id="cc368-174">For more information, see [Minimum Resource Access Requirements](configuring-the-data-service-wcf-data-services.md#accessRequirements).</span></span>  
  
### <a name="implement-role-based-interceptors"></a><span data-ttu-id="cc368-175">Wdrażanie interceptorów opartych na rolach</span><span class="sxs-lookup"><span data-stu-id="cc368-175">Implement Role-Based Interceptors</span></span>  
 <span data-ttu-id="cc368-176">Interceptory umożliwiają przechwytywanie żądań zasobów usługi danych, zanim zostaną one przetworzone przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-176">Interceptors enable you to intercept requests against data service resources before they are acted on by the data service.</span></span> <span data-ttu-id="cc368-177">Aby uzyskać więcej informacji, zobacz [Interceptory](interceptors-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-177">For more information, see [Interceptors](interceptors-wcf-data-services.md).</span></span> <span data-ttu-id="cc368-178">Interceptory pozwalają na podejmowanie decyzji dotyczących autoryzacji na podstawie uwierzytelnionego użytkownika, który wysłał żądanie.</span><span class="sxs-lookup"><span data-stu-id="cc368-178">Interceptors enable you to make authorization decisions based the authenticated user that is making the request.</span></span> <span data-ttu-id="cc368-179">Przykład sposobu ograniczania dostępu do zasobów usługi danych na podstawie tożsamości uwierzytelnionego użytkownika można znaleźć w temacie [How to: Przechwytywanie danych usługi messages](how-to-intercept-data-service-messages-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-179">For an example of how to restrict access to data service resources based on an authenticated user identity, see [How to: Intercept Data Service Messages](how-to-intercept-data-service-messages-wcf-data-services.md).</span></span>  
  
### <a name="restrict-access-to-the-persisted-data-store-and-local-resources"></a><span data-ttu-id="cc368-180">Ograniczanie dostępu do trwałego magazynu danych i zasobów lokalnych</span><span class="sxs-lookup"><span data-stu-id="cc368-180">Restrict Access to the Persisted Data Store and Local Resources</span></span>  
 <span data-ttu-id="cc368-181">Kontom, które są używane do uzyskiwania dostępu do magazynu trwałego, należy udzielić w bazie danych lub systemie plików praw wystarczających do obsługi wymagań usługi danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-181">The accounts that are used to access the persisted store should be granted only enough rights in a database or the file system to support the requirements of the data service.</span></span> <span data-ttu-id="cc368-182">Jeśli jest używane uwierzytelnianie anonimowe, jest to konto używane do uruchamiania aplikacji macierzystej.</span><span class="sxs-lookup"><span data-stu-id="cc368-182">When anonymous authentication is used, this is the account used to run the hosting application.</span></span> <span data-ttu-id="cc368-183">Aby uzyskać więcej informacji, zobacz [How to: programowanie usługi danych programu WCF działającej w usługach IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-183">For more information, see [How to: Develop a WCF Data Service Running on IIS](how-to-develop-a-wcf-data-service-running-on-iis.md).</span></span> <span data-ttu-id="cc368-184">Jeśli jest używana personifikacja, uwierzytelnionym użytkownikom należy udzielić dostępu do tych zasobów, zwykle jako części grupy systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="cc368-184">When impersonation is used, authenticated users must be granted access to these resources, usually as part of a Windows group.</span></span>  
  
## <a name="other-security-considerations"></a><span data-ttu-id="cc368-185">Inne uwagi dotyczące zabezpieczeń</span><span class="sxs-lookup"><span data-stu-id="cc368-185">Other Security Considerations</span></span>  
  
### <a name="secure-the-data-in-the-payload"></a><span data-ttu-id="cc368-186">Zabezpieczanie danych w ładunku</span><span class="sxs-lookup"><span data-stu-id="cc368-186">Secure the Data in the Payload</span></span>  
<span data-ttu-id="cc368-187">Usługa OData jest oparta na protokole HTTP.</span><span class="sxs-lookup"><span data-stu-id="cc368-187">OData is based on the HTTP protocol.</span></span> <span data-ttu-id="cc368-188">W komunikacie HTTP nagłówek może zawierać cenne poświadczenia użytkownika, zależnie od uwierzytelniania implementowanego przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-188">In an HTTP message, the header may contain valuable user credentials, depending on the authentication implemented by the data service.</span></span> <span data-ttu-id="cc368-189">Treść komunikatu może również zawierać cenne dane klienta, które muszą być chronione.</span><span class="sxs-lookup"><span data-stu-id="cc368-189">The message body may also contain valuable customer data that must be protected.</span></span> <span data-ttu-id="cc368-190">W obu tych przypadkach zaleca się używanie protokołu SSL do ochrony tych informacji w sieci.</span><span class="sxs-lookup"><span data-stu-id="cc368-190">In both of these cases, we recommend that you use SSL to protect this information over the wire.</span></span>  
  
### <a name="ignored-message-headers-and-cookies"></a><span data-ttu-id="cc368-191">Ignorowane nagłówki komunikatów i pliki cookie</span><span class="sxs-lookup"><span data-stu-id="cc368-191">Ignored Message Headers and Cookies</span></span>  
 <span data-ttu-id="cc368-192">Nagłówki żądania HTTP inne niż te, które deklarują typy zawartości i lokalizacje zasobów, są ignorowane i nigdy nie są ustawiane przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-192">HTTP request headers, other than those that declare content types and resource locations, are ignored and are never set by the data service.</span></span>  
  
 <span data-ttu-id="cc368-193">Pliki cookie mogą służyć jako część schematu uwierzytelniania, na przykład z uwierzytelnianiem formularzy ASP.NET.</span><span class="sxs-lookup"><span data-stu-id="cc368-193">Cookies can be used as part of an authentication scheme, such as with ASP.NET Forms Authentication.</span></span> <span data-ttu-id="cc368-194">Jednak wszystkie pliki cookie HTTP ustawione w żądaniu przychodzącym są ignorowane przez usługi DataService.</span><span class="sxs-lookup"><span data-stu-id="cc368-194">However, any HTTP cookies set on an incoming request are ignored by WCF DataServices.</span></span> <span data-ttu-id="cc368-195">Host usługi danych może przetworzyć plik cookie, ale środowisko uruchomieniowe Usługi danych programu WCF nigdy nie analizuje ani nie zwraca plików cookie.</span><span class="sxs-lookup"><span data-stu-id="cc368-195">The host of a data service may process the cookie, but the WCF Data Services runtime never analyzes or returns cookies.</span></span> <span data-ttu-id="cc368-196">Biblioteka klienta Usługi danych programu WCF również nie przetwarza plików cookie wysyłanych w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="cc368-196">The WCF Data Services client library also does not process cookies sent in the response.</span></span>  
  
### <a name="custom-hosting-requirements"></a><span data-ttu-id="cc368-197">Niestandardowe wymagania hostingu</span><span class="sxs-lookup"><span data-stu-id="cc368-197">Custom Hosting Requirements</span></span>  
 <span data-ttu-id="cc368-198">Domyślnie Usługi danych programu WCF jest tworzona jako aplikacja ASP.NET hostowana w usługach IIS.</span><span class="sxs-lookup"><span data-stu-id="cc368-198">By default, WCF Data Services is created as an ASP.NET application hosted in IIS.</span></span> <span data-ttu-id="cc368-199">Pozwala to usłudze danych na korzystanie z zachowań związanych z zabezpieczeniami zaimplementowanych na tej platformie.</span><span class="sxs-lookup"><span data-stu-id="cc368-199">This enables the data service to leverage the secure behaviors of this platform.</span></span> <span data-ttu-id="cc368-200">Można zdefiniować Usługi danych programu WCF, które są hostowane przez niestandardowego hosta.</span><span class="sxs-lookup"><span data-stu-id="cc368-200">You can define WCF Data Services that are hosted by a custom host.</span></span> <span data-ttu-id="cc368-201">Aby uzyskać więcej informacji, zobacz [hosting usługi danych](hosting-the-data-service-wcf-data-services.md).</span><span class="sxs-lookup"><span data-stu-id="cc368-201">For more information, see [Hosting the Data Service](hosting-the-data-service-wcf-data-services.md).</span></span> <span data-ttu-id="cc368-202">Składniki i platforma hostująca usługę danych muszą zapewnić następujące zachowania związane z zabezpieczeniami, aby zapobiec atakom na usługę danych:</span><span class="sxs-lookup"><span data-stu-id="cc368-202">The components and platform hosting a data service must ensure the following security behaviors to prevent attacks on the data service:</span></span>  
  
- <span data-ttu-id="cc368-203">Ogranicz długość identyfikatora URI akceptowanego w żądaniu usługi danych dla wszystkich możliwych operacji.</span><span class="sxs-lookup"><span data-stu-id="cc368-203">Limit the length of the URI accepted in a data service request for all possible operations.</span></span>  
  
- <span data-ttu-id="cc368-204">Ogranicz rozmiar przychodzących i wychodzących komunikatów HTTP.</span><span class="sxs-lookup"><span data-stu-id="cc368-204">Limit the size of both incoming and outgoing HTTP messages.</span></span>  
  
- <span data-ttu-id="cc368-205">Ogranicz łączną liczbę zaległych żądań w danym momencie.</span><span class="sxs-lookup"><span data-stu-id="cc368-205">Limit the total number of outstanding requests at any given time.</span></span>  
  
- <span data-ttu-id="cc368-206">Ogranicz rozmiar nagłówków HTTP i ich wartości oraz Zapewnij Usługi danych programu WCF dostęp do danych nagłówka.</span><span class="sxs-lookup"><span data-stu-id="cc368-206">Limit the size of HTTP headers and their values, and provide WCF Data Services access to header data.</span></span>  
  
- <span data-ttu-id="cc368-207">Wykrywaj i odpieraj znane ataki, takie jak TCP SYN i ataki przez powtórzenie komunikatu.</span><span class="sxs-lookup"><span data-stu-id="cc368-207">Detect and counter known attacks, such as TCP SYN and message replay attacks.</span></span>  
  
### <a name="values-are-not-further-encoded"></a><span data-ttu-id="cc368-208">Wartości nie są już kodowane</span><span class="sxs-lookup"><span data-stu-id="cc368-208">Values Are Not Further Encoded</span></span>  
 <span data-ttu-id="cc368-209">Wartości właściwości wysyłane do usługi danych nie są jeszcze kodowane przez środowisko uruchomieniowe Usługi danych programu WCF.</span><span class="sxs-lookup"><span data-stu-id="cc368-209">Property values sent to the data service are not further encoded by the WCF Data Services runtime.</span></span> <span data-ttu-id="cc368-210">Jeśli na przykład właściwość ciągu jednostki zawiera sformatowaną zawartość HTML, znaczniki nie są kodowane w formacie HTML przez usługę danych.</span><span class="sxs-lookup"><span data-stu-id="cc368-210">For example, when a string property of an entity contains formatted HTML content, the tags are not HTML encoded by the data service.</span></span> <span data-ttu-id="cc368-211">Ponadto usługa danych nie koduje już wartości właściwości w odpowiedzi.</span><span class="sxs-lookup"><span data-stu-id="cc368-211">The data service also does not further encode property values in the response.</span></span> <span data-ttu-id="cc368-212">Biblioteka klienta również nie przeprowadza dodatkowego kodowania.</span><span class="sxs-lookup"><span data-stu-id="cc368-212">The client library also does not perform any additional encoding.</span></span>  
  
### <a name="considerations-for-client-applications"></a><span data-ttu-id="cc368-213">Uwagi dotyczące aplikacji klienta</span><span class="sxs-lookup"><span data-stu-id="cc368-213">Considerations for Client Applications</span></span>  
 <span data-ttu-id="cc368-214">Następujące zagadnienia dotyczące zabezpieczeń dotyczą aplikacji korzystających z Usługi danych programu WCF klienta programu w celu uzyskiwania dostępu do usług OData:</span><span class="sxs-lookup"><span data-stu-id="cc368-214">The following security considerations apply to applications that use the WCF Data Services client to access OData services:</span></span>  
  
- <span data-ttu-id="cc368-215">Biblioteka klienta zakłada, że protokoły używane w celu uzyskania dostępu do usługi danych zapewniają odpowiedni poziom zabezpieczeń.</span><span class="sxs-lookup"><span data-stu-id="cc368-215">The client library assumes that the protocols used to access the data service provide an appropriate level of security.</span></span>  
  
- <span data-ttu-id="cc368-216">Biblioteka klienta używa wszystkich wartości domyślnych dla limitów czasu i opcji analizy podstawowych stosów transportu zapewnianych przez platformę.</span><span class="sxs-lookup"><span data-stu-id="cc368-216">The client library uses all the default values for timeouts and parsing options of the underlying platform-provided transport stacks.</span></span>  
  
- <span data-ttu-id="cc368-217">Biblioteka klienta nie odczytuje żadnych ustawień z plików konfiguracji aplikacji.</span><span class="sxs-lookup"><span data-stu-id="cc368-217">The client library does not read any settings from application configuration files.</span></span>  
  
- <span data-ttu-id="cc368-218">Biblioteka klienta nie implementuje żadnych mechanizmów dostępu między domenami.</span><span class="sxs-lookup"><span data-stu-id="cc368-218">The client library does not implement any cross domain access mechanisms.</span></span> <span data-ttu-id="cc368-219">W zamian opiera się na mechanizmach zapewnianych przez podstawowy stos HTTP.</span><span class="sxs-lookup"><span data-stu-id="cc368-219">Instead, it relies on the mechanisms provided by the underlying HTTP stack.</span></span>  
  
- <span data-ttu-id="cc368-220">Biblioteka klienta nie ma żadnych elementów interfejsu użytkownika i nigdy nie próbuje wyświetlać ani renderować danych, które odbiera lub wysyła.</span><span class="sxs-lookup"><span data-stu-id="cc368-220">The client library has no user interface elements, and it never tries to display or render the data that it receives or sends.</span></span>  
  
- <span data-ttu-id="cc368-221">Firma Microsoft zaleca, aby aplikacje klienta zawsze weryfikowały dane wprowadzone przez użytkownika, a także akceptowane dane pochodzące z niezaufanych usług.</span><span class="sxs-lookup"><span data-stu-id="cc368-221">We recommend that client applications always validate user input as well as data accepted from untrusted services.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="cc368-222">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="cc368-222">See also</span></span>

- [<span data-ttu-id="cc368-223">Definiowanie usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="cc368-223">Defining WCF Data Services</span></span>](defining-wcf-data-services.md)
- [<span data-ttu-id="cc368-224">Biblioteka klienta usług danych WCF</span><span class="sxs-lookup"><span data-stu-id="cc368-224">WCF Data Services Client Library</span></span>](wcf-data-services-client-library.md)
