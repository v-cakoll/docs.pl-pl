---
title: Obsługa SqlClient dla wysokiej dostępności, odzyskiwania po awarii
description: Dowiedz się więcej na temat obsługi aplikacji SqlClient w celu uzyskania wysokiej dostępności, odzyskiwania po awarii w SQL Server przy użyciu Zawsze włączone grupy dostępności.
ms.date: 03/30/2017
ms.assetid: 61e0b396-09d7-4e13-9711-7dcbcbd103a0
ms.openlocfilehash: eba243d37db8262970d161cfa786d3aee4462950
ms.sourcegitcommit: 33deec3e814238fb18a49b2a7e89278e27888291
ms.translationtype: MT
ms.contentlocale: pl-PL
ms.lasthandoff: 06/02/2020
ms.locfileid: "84286213"
---
# <a name="sqlclient-support-for-high-availability-disaster-recovery"></a><span data-ttu-id="53e43-103">Obsługa SqlClient dla wysokiej dostępności, odzyskiwania po awarii</span><span class="sxs-lookup"><span data-stu-id="53e43-103">SqlClient Support for High Availability, Disaster Recovery</span></span>
<span data-ttu-id="53e43-104">W tym temacie omówiono obsługę SqlClient (dodano w .NET Framework 4,5) w celu uzyskania wysokiej dostępności i odzyskiwania po awarii — Zawsze włączone grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="53e43-104">This topic discusses SqlClient support (added in .NET Framework 4.5) for high-availability, disaster recovery -- AlwaysOn Availability Groups.</span></span>  <span data-ttu-id="53e43-105">Dodano funkcję Zawsze włączone grupy dostępności do SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="53e43-105">AlwaysOn Availability Groups feature was added to SQL Server 2012.</span></span> <span data-ttu-id="53e43-106">Aby uzyskać więcej informacji na temat Zawsze włączone grupy dostępności, zobacz SQL Server Books Online.</span><span class="sxs-lookup"><span data-stu-id="53e43-106">For more information about AlwaysOn Availability Groups, see SQL Server Books Online.</span></span>  
  
 <span data-ttu-id="53e43-107">W właściwości Connection można teraz określić odbiornik grupy dostępności (wysokiej dostępności, odzyskiwania po awarii) lub SQL Server 2012 wystąpienia klastra trybu failover.</span><span class="sxs-lookup"><span data-stu-id="53e43-107">You can now specify the availability group listener of a (high-availability, disaster-recovery) availability group (AG) or SQL Server 2012 Failover Cluster Instance in the connection property.</span></span> <span data-ttu-id="53e43-108">Jeśli aplikacja SqlClient jest połączona z bazą danych AlwaysOn, która przejdzie w tryb failover, oryginalne połączenie zostanie przerwane, a aplikacja musi otworzyć nowe połączenie, aby kontynuować pracę po przejściu w tryb pracy awaryjnej.</span><span class="sxs-lookup"><span data-stu-id="53e43-108">If a SqlClient application is connected to an AlwaysOn database that fails over, the original connection is broken and the application must open a new connection to continue work after the failover.</span></span>  
  
 <span data-ttu-id="53e43-109">Jeśli nie łączysz się z odbiornikiem grupy dostępności lub wystąpieniem klastra trybu failover w systemie SQL Server 2012, a wiele adresów IP jest skojarzonych z nazwą hosta, klient SqlClient będzie sekwencyjnie powtarzać wszystkie adresy IP skojarzone z wpisem DNS.</span><span class="sxs-lookup"><span data-stu-id="53e43-109">If you are not connecting to an availability group listener or SQL Server 2012 Failover Cluster Instance, and if multiple IP addresses are associated with a hostname, SqlClient will iterate sequentially through all IP addresses associated with DNS entry.</span></span> <span data-ttu-id="53e43-110">Może to być czasochłonne, jeśli pierwszy adres IP zwrócony przez serwer DNS nie jest powiązany z żadną kartą interfejsu sieciowego.</span><span class="sxs-lookup"><span data-stu-id="53e43-110">This can be time consuming if the first IP address returned by DNS server is not bound to any network interface card (NIC).</span></span> <span data-ttu-id="53e43-111">Podczas nawiązywania połączenia z odbiornikiem grupy dostępności lub wystąpieniem klastra trybu failover z systemem SQL Server 2012 klient ponowi próbę nawiązania połączenia ze wszystkimi adresami IP równolegle i w przypadku pomyślnego nawiązania połączenia.</span><span class="sxs-lookup"><span data-stu-id="53e43-111">When connecting to an availability group listener or SQL Server 2012 Failover Cluster Instance, SqlClient attempts to establish connections to all IP addresses in parallel and if a connection attempt succeeds, the driver will discard any pending connection attempts.</span></span>  
  
> [!NOTE]
> <span data-ttu-id="53e43-112">Zwiększenie limitu czasu połączenia i wdrożenie logiki ponawiania połączenia spowoduje zwiększenie prawdopodobieństwa, że aplikacja będzie łączyć się z grupą dostępności.</span><span class="sxs-lookup"><span data-stu-id="53e43-112">Increasing connection timeout and implementing connection retry logic will increase the probability that an application will connect to an availability group.</span></span> <span data-ttu-id="53e43-113">Ponadto, ponieważ połączenie może zakończyć się niepowodzeniem ze względu na przejście w tryb failover, należy wdrożyć logikę ponawiania połączenia, ponawianie próby połączenia, dopóki nie nastąpi ponowne połączenie.</span><span class="sxs-lookup"><span data-stu-id="53e43-113">Also, because a connection can fail because of a failover, you should implement connection retry logic, retrying a failed connection until it reconnects.</span></span>  
  
 <span data-ttu-id="53e43-114">Następujące właściwości połączenia zostały dodane do usługi SqlClient w .NET Framework 4,5:</span><span class="sxs-lookup"><span data-stu-id="53e43-114">The following connection properties were added to SqlClient in .NET Framework 4.5:</span></span>  
  
- `ApplicationIntent`  
  
- `MultiSubnetFailover`  
  
 <span data-ttu-id="53e43-115">Można programowo modyfikować te słowa kluczowe parametrów połączenia przy użyciu:</span><span class="sxs-lookup"><span data-stu-id="53e43-115">You can programmatically modify these connection string keywords with:</span></span>  
  
1. <xref:System.Data.SqlClient.SqlConnectionStringBuilder.ApplicationIntent%2A>  
  
2. <xref:System.Data.SqlClient.SqlConnectionStringBuilder.MultiSubnetFailover%2A>  

> [!NOTE]
> <span data-ttu-id="53e43-116">Ustawienie `MultiSubnetFailover` `true` nie jest wymagane w przypadku .NET Framework 4.6.1 lub nowszych wersji.</span><span class="sxs-lookup"><span data-stu-id="53e43-116">Setting `MultiSubnetFailover` to `true` isn't required with .NET Framework 4.6.1 or later versions.</span></span>
  
## <a name="connecting-with-multisubnetfailover"></a><span data-ttu-id="53e43-117">Łączenie z usługą MultiSubnetFailover</span><span class="sxs-lookup"><span data-stu-id="53e43-117">Connecting With MultiSubnetFailover</span></span>  
 <span data-ttu-id="53e43-118">Zawsze określaj `MultiSubnetFailover=True` podczas nawiązywania połączenia z odbiornikiem grupy dostępności SQL Server 2012 lub z wystąpieniem klastra trybu failover z systemem SQL Server 2012.</span><span class="sxs-lookup"><span data-stu-id="53e43-118">Always specify `MultiSubnetFailover=True` when connecting to a SQL Server 2012 availability group listener or SQL Server 2012 Failover Cluster Instance.</span></span> <span data-ttu-id="53e43-119">`MultiSubnetFailover`Włącza szybszą pracę w trybie failover dla wszystkich grup dostępności i wystąpienia klastra trybu failover w SQL Server 2012 i znacznie skraca czas pracy w trybie failover dla topologii zawsze włączonych dla jednej i kilku podsieci.</span><span class="sxs-lookup"><span data-stu-id="53e43-119">`MultiSubnetFailover` enables faster failover for all Availability Groups and or Failover Cluster Instance in SQL Server 2012 and will significantly reduce failover time for single and multi-subnet AlwaysOn topologies.</span></span> <span data-ttu-id="53e43-120">Podczas pracy w trybie failover z obsługą wielopodsieci klient próbuje równolegle nawiązywania połączeń.</span><span class="sxs-lookup"><span data-stu-id="53e43-120">During a multi-subnet failover, the client will attempt connections in parallel.</span></span> <span data-ttu-id="53e43-121">Podczas przełączania do trybu failover w podsieci program będzie agresywnie ponawiać próbę połączenia TCP.</span><span class="sxs-lookup"><span data-stu-id="53e43-121">During a subnet failover, will aggressively retry the TCP connection.</span></span>  
  
 <span data-ttu-id="53e43-122">`MultiSubnetFailover`Właściwość Connection wskazuje, że aplikacja jest wdrażana w grupie dostępności lub wystąpieniu klastra trybu failover w systemie SQL Server 2012, a klient SqlClient podejmie próbę nawiązania połączenia z bazą danych w podstawowym wystąpieniu SQL Server, próbując nawiązać połączenie ze wszystkimi adresami IP.</span><span class="sxs-lookup"><span data-stu-id="53e43-122">The `MultiSubnetFailover` connection property indicates that the application is being deployed in an availability group or SQL Server 2012 Failover Cluster Instance and that SqlClient will try to connect to the database on the primary SQL Server instance by trying to connect to all the IP addresses.</span></span> <span data-ttu-id="53e43-123">Gdy `MultiSubnetFailover=True` jest określony dla połączenia, klient ponawia próbę nawiązania połączenia TCP szybciej niż domyślne interwały ponownej transmisji protokołu TCP systemu operacyjnego.</span><span class="sxs-lookup"><span data-stu-id="53e43-123">When `MultiSubnetFailover=True` is specified for a connection, the client retries TCP connection attempts faster than the operating system’s default TCP retransmit intervals.</span></span> <span data-ttu-id="53e43-124">Umożliwia to szybsze Ponowne nawiązywanie połączenia po przejściu do trybu failover grupy dostępności AlwaysOn lub funkcji AlwaysOn klastra trybu failover i ma zastosowanie zarówno do grup dostępności, jak i dla jednej podsieci i wystąpień klastra trybu failover.</span><span class="sxs-lookup"><span data-stu-id="53e43-124">This enables faster reconnection after failover of either an AlwaysOn Availability Group or an AlwaysOn Failover Cluster Instance, and is applicable to both single- and multi-subnet Availability Groups and Failover Cluster Instances.</span></span>  
  
 <span data-ttu-id="53e43-125">Aby uzyskać więcej informacji na temat słów kluczowych parametrów połączenia w SqlClient, zobacz <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A> .</span><span class="sxs-lookup"><span data-stu-id="53e43-125">For more information about connection string keywords in SqlClient, see <xref:System.Data.SqlClient.SqlConnection.ConnectionString%2A>.</span></span>  
  
 <span data-ttu-id="53e43-126">Określanie, `MultiSubnetFailover=True` czy nawiązywanie połączenia z elementem innym niż odbiornik grupy dostępności lub wystąpienie klastra trybu failover w SQL Server 2012 może skutkować negatywnym wpływem na wydajność i nie jest obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="53e43-126">Specifying `MultiSubnetFailover=True` when connecting to something other than a availability group listener or SQL Server 2012 Failover Cluster Instance may result in a negative performance impact, and is not supported.</span></span>  
  
 <span data-ttu-id="53e43-127">Skorzystaj z poniższych wskazówek, aby nawiązać połączenie z serwerem w grupie dostępności lub wystąpieniu klastra trybu failover SQL Server 2012:</span><span class="sxs-lookup"><span data-stu-id="53e43-127">Use the following guidelines to connect to a server in an availability group or SQL Server 2012 Failover Cluster Instance:</span></span>  
  
- <span data-ttu-id="53e43-128">Użyj `MultiSubnetFailover` właściwości Connection podczas nawiązywania połączenia z pojedynczą podsiecią lub z jedną podsiecią. spowoduje to zwiększenie wydajności obu tych wartości.</span><span class="sxs-lookup"><span data-stu-id="53e43-128">Use the `MultiSubnetFailover` connection property when connecting to a single subnet or multi-subnet; it will improve performance for both.</span></span>  
  
- <span data-ttu-id="53e43-129">Aby nawiązać połączenie z grupą dostępności, należy określić odbiornik grupy dostępności dla grupy dostępności jako serwer w parametrach połączenia.</span><span class="sxs-lookup"><span data-stu-id="53e43-129">To connect to an availability group, specify the availability group listener of the availability group as the server in your connection string.</span></span>  
  
- <span data-ttu-id="53e43-130">Połączenie z wystąpieniem SQL Server skonfigurowanym za pomocą więcej niż 64 adresów IP spowoduje błąd połączenia.</span><span class="sxs-lookup"><span data-stu-id="53e43-130">Connecting to a SQL Server instance configured with more than 64 IP addresses will cause a connection failure.</span></span>  
  
- <span data-ttu-id="53e43-131">Nie ma to żadnego zastosowania w przypadku aplikacji, która używa `MultiSubnetFailover` właściwości Connection, na podstawie typu uwierzytelniania: SQL Server uwierzytelniania, uwierzytelniania Kerberos lub uwierzytelniania systemu Windows.</span><span class="sxs-lookup"><span data-stu-id="53e43-131">Behavior of an application that uses the `MultiSubnetFailover` connection property is not affected based on the type of authentication: SQL Server Authentication, Kerberos Authentication, or Windows Authentication.</span></span>  
  
- <span data-ttu-id="53e43-132">Zwiększ wartość, `Connect Timeout` Aby uwzględnić czas pracy w trybie failover i zmniejszyć liczbę ponownych prób połączenia aplikacji.</span><span class="sxs-lookup"><span data-stu-id="53e43-132">Increase the value of `Connect Timeout` to accommodate for failover time and reduce application connection retry attempts.</span></span>  
  
- <span data-ttu-id="53e43-133">Transakcje rozproszone nie są obsługiwane.</span><span class="sxs-lookup"><span data-stu-id="53e43-133">Distributed transactions are not supported.</span></span>  
  
 <span data-ttu-id="53e43-134">Jeśli Routing tylko do odczytu nie obowiązuje, połączenie z pomocniczą lokalizacją repliki zakończy się niepowodzeniem w następujących sytuacjach:</span><span class="sxs-lookup"><span data-stu-id="53e43-134">If read-only routing is not in effect, connecting to a secondary replica location will fail in the following situations:</span></span>  
  
1. <span data-ttu-id="53e43-135">Jeśli pomocnicza lokalizacja repliki nie jest skonfigurowana do akceptowania połączeń.</span><span class="sxs-lookup"><span data-stu-id="53e43-135">If the secondary replica location is not configured to accept connections.</span></span>  
  
2. <span data-ttu-id="53e43-136">Jeśli aplikacja używa programu `ApplicationIntent=ReadWrite` (omówione poniżej) i pomocnicza lokalizacja repliki jest skonfigurowana do dostępu tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-136">If an application uses `ApplicationIntent=ReadWrite` (discussed below) and the secondary replica location is configured for read-only access.</span></span>  
  
 <span data-ttu-id="53e43-137"><xref:System.Data.SqlClient.SqlDependency>nie jest obsługiwane w replikach pomocniczych tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-137"><xref:System.Data.SqlClient.SqlDependency> is not supported on read-only secondary replicas.</span></span>  
  
 <span data-ttu-id="53e43-138">Połączenie zakończy się niepowodzeniem, jeśli dla repliki podstawowej skonfigurowano odrzucanie obciążeń tylko do odczytu, a parametry połączenia zawierają `ApplicationIntent=ReadOnly` .</span><span class="sxs-lookup"><span data-stu-id="53e43-138">A connection will fail if a primary replica is configured to reject read-only workloads and the connection string contains `ApplicationIntent=ReadOnly`.</span></span>  
  
## <a name="upgrading-to-use-multi-subnet-clusters-from-database-mirroring"></a><span data-ttu-id="53e43-139">Uaktualnianie do korzystania z klastrów wielopodsieci z poziomu dublowania baz danych</span><span class="sxs-lookup"><span data-stu-id="53e43-139">Upgrading to Use Multi-Subnet Clusters from Database Mirroring</span></span>  
 <span data-ttu-id="53e43-140">Błąd połączenia ( <xref:System.ArgumentException> ) nastąpi, jeśli `MultiSubnetFailover` `Failover Partner` w parametrach połączenia znajdują się słowa kluczowe i połączenia, lub jeśli `MultiSubnetFailover=True` używany jest protokół inny niż TCP.</span><span class="sxs-lookup"><span data-stu-id="53e43-140">A connection error (<xref:System.ArgumentException>) will occur if the `MultiSubnetFailover` and `Failover Partner` connection keywords are present in the connection string, or if `MultiSubnetFailover=True` and a protocol other than TCP is used.</span></span> <span data-ttu-id="53e43-141">Błąd ( <xref:System.Data.SqlClient.SqlException> ) również występuje `MultiSubnetFailover` , gdy jest używany, a SQL Server zwraca odpowiedź partnera trybu failover, wskazującą, że jest częścią pary dublowania bazy danych.</span><span class="sxs-lookup"><span data-stu-id="53e43-141">An error (<xref:System.Data.SqlClient.SqlException>) will also occur if `MultiSubnetFailover` is used and the SQL Server returns a failover partner response indicating it is part of a database mirroring pair.</span></span>  
  
 <span data-ttu-id="53e43-142">W przypadku uaktualniania aplikacji SqlClient, która obecnie używa dublowania baz danych do scenariusza z obsługą kilku podsieci, należy usunąć `Failover Partner` Właściwość połączenia i zastąpić ją `MultiSubnetFailover` ustawieniem ustawionym na `True` i zastąpić nazwę serwera w parametrach połączenia odbiornikiem grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="53e43-142">If you upgrade a SqlClient application that currently uses database mirroring to a multi-subnet scenario, you should remove the `Failover Partner` connection property and replace it with `MultiSubnetFailover` set to `True` and replace the server name in the connection string with an availability group listener.</span></span> <span data-ttu-id="53e43-143">Jeśli parametry połączenia korzystają z `Failover Partner` i `MultiSubnetFailover=True` , sterownik wygeneruje błąd.</span><span class="sxs-lookup"><span data-stu-id="53e43-143">If a connection string uses `Failover Partner` and `MultiSubnetFailover=True`, the driver will generate an error.</span></span> <span data-ttu-id="53e43-144">Jeśli jednak parametry połączenia korzystają z `Failover Partner` i `MultiSubnetFailover=False` (lub `ApplicationIntent=ReadWrite` ), aplikacja będzie używać funkcji dublowania baz danych.</span><span class="sxs-lookup"><span data-stu-id="53e43-144">However, if a connection string uses `Failover Partner` and `MultiSubnetFailover=False` (or `ApplicationIntent=ReadWrite`), the application will use database mirroring.</span></span>  
  
 <span data-ttu-id="53e43-145">Sterownik zwróci błąd, jeśli używana jest funkcja dublowania bazy danych w podstawowej bazie danych w sieci AG, a jeśli `MultiSubnetFailover=True` jest używana w parametrach połączenia, które łączą się z podstawową bazą danych, a nie z odbiornikiem grupy dostępności.</span><span class="sxs-lookup"><span data-stu-id="53e43-145">The driver will return an error if database mirroring is used on the primary database in the AG, and if `MultiSubnetFailover=True` is used in the connection string that connects to a primary database instead of to an availability group listener.</span></span>  
  
## <a name="specifying-application-intent"></a><span data-ttu-id="53e43-146">Określanie zamiaru aplikacji</span><span class="sxs-lookup"><span data-stu-id="53e43-146">Specifying Application Intent</span></span>  
 <span data-ttu-id="53e43-147">Gdy `ApplicationIntent=ReadOnly` klient zażąda odczytu obciążenia podczas nawiązywania połączenia z włączoną funkcją AlwaysOn.</span><span class="sxs-lookup"><span data-stu-id="53e43-147">When `ApplicationIntent=ReadOnly`, the client requests a read workload when connecting to an AlwaysOn enabled database.</span></span> <span data-ttu-id="53e43-148">Serwer będzie wymuszać zamiar w czasie połączenia oraz w instrukcji USE DATABASE, ale tylko do bazy danych zawsze włączone.</span><span class="sxs-lookup"><span data-stu-id="53e43-148">The server will enforce the intent at connection time and during a USE database statement but only to an Always On enabled database.</span></span>  
  
 <span data-ttu-id="53e43-149">`ApplicationIntent`Słowo kluczowe nie działa ze starszymi bazami danych tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-149">The `ApplicationIntent` keyword does not work with legacy, read-only databases.</span></span>  
  
 <span data-ttu-id="53e43-150">Baza danych może zezwalać na odczyt obciążeń lub nie zezwalać na nie.</span><span class="sxs-lookup"><span data-stu-id="53e43-150">A database can allow or disallow read workloads on the targeted AlwaysOn database.</span></span> <span data-ttu-id="53e43-151">(W tym celu należy wykonać `ALLOW_CONNECTIONS` klauzulę `PRIMARY_ROLE` `SECONDARY_ROLE` instrukcji języka Transact-SQL).</span><span class="sxs-lookup"><span data-stu-id="53e43-151">(This is done with the `ALLOW_CONNECTIONS` clause of the `PRIMARY_ROLE` and `SECONDARY_ROLE`Transact-SQL statements.)</span></span>  
  
 <span data-ttu-id="53e43-152">`ApplicationIntent`Słowo kluczowe jest używane do włączania routingu tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-152">The `ApplicationIntent` keyword is used to enable read-only routing.</span></span>  
  
## <a name="read-only-routing"></a><span data-ttu-id="53e43-153">Routing tylko do odczytu</span><span class="sxs-lookup"><span data-stu-id="53e43-153">Read-Only Routing</span></span>  
 <span data-ttu-id="53e43-154">Routing tylko do odczytu to funkcja, która umożliwia zapewnienie dostępności repliki tylko do odczytu bazy danych.</span><span class="sxs-lookup"><span data-stu-id="53e43-154">Read-only routing is a feature that can ensure the availability of a read only replica of a database.</span></span> <span data-ttu-id="53e43-155">Aby włączyć routing tylko do odczytu:</span><span class="sxs-lookup"><span data-stu-id="53e43-155">To enable read-only routing:</span></span>  
  
1. <span data-ttu-id="53e43-156">Należy nawiązać połączenie z odbiornikiem grupy dostępności zawsze włączone.</span><span class="sxs-lookup"><span data-stu-id="53e43-156">You must connect to an Always On Availability Group availability group listener.</span></span>  
  
2. <span data-ttu-id="53e43-157">`ApplicationIntent`Słowo kluczowe parametrów połączenia musi być ustawione na wartość `ReadOnly` .</span><span class="sxs-lookup"><span data-stu-id="53e43-157">The `ApplicationIntent` connection string keyword must be set to `ReadOnly`.</span></span>  
  
3. <span data-ttu-id="53e43-158">Aby włączyć routing tylko do odczytu, Grupa dostępności musi być skonfigurowana przez administratora bazy danych.</span><span class="sxs-lookup"><span data-stu-id="53e43-158">The Availability Group must be configured by the database administrator to enable read-only routing.</span></span>  
  
 <span data-ttu-id="53e43-159">Istnieje możliwość, że wiele połączeń przy użyciu routingu tylko do odczytu nie wszystkie nawiązują połączenie z tą samą repliką tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-159">It is possible that multiple connections using read-only routing will not all connect to the same read-only replica.</span></span> <span data-ttu-id="53e43-160">Zmiany w synchronizacji bazy danych lub zmiany w konfiguracji routingu serwera mogą spowodować połączenia klientów z różnymi replikami tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-160">Changes in database synchronization or changes in the server's routing configuration can result in client connections to different read-only replicas.</span></span> <span data-ttu-id="53e43-161">Aby upewnić się, że wszystkie żądania tylko do odczytu łączą się z tą samą repliką tylko do odczytu, nie przekazuj odbiornika grupy dostępności do `Data Source` słowa kluczowego parametrów połączenia.</span><span class="sxs-lookup"><span data-stu-id="53e43-161">To ensure that all read-only requests connect to the same read-only replica, do not pass an availability group listener to the `Data Source` connection string keyword.</span></span> <span data-ttu-id="53e43-162">Zamiast tego należy określić nazwę wystąpienia tylko do odczytu.</span><span class="sxs-lookup"><span data-stu-id="53e43-162">Instead, specify the name of the read-only instance.</span></span>  
  
 <span data-ttu-id="53e43-163">Routing tylko do odczytu może trwać dłużej niż łączenie z serwerem podstawowym, ponieważ tylko do odczytu jest nawiązywane połączenie z serwerem podstawowym, a następnie szuka najlepszego dostępnego dodatkowego elementu pomocniczego.</span><span class="sxs-lookup"><span data-stu-id="53e43-163">Read-only routing may take longer than connecting to the primary because read only routing first connects to the primary and then looks for the best available readable secondary.</span></span> <span data-ttu-id="53e43-164">W związku z tym należy zwiększyć limit czasu logowania.</span><span class="sxs-lookup"><span data-stu-id="53e43-164">Because of this, you should increase your login timeout.</span></span>  
  
## <a name="see-also"></a><span data-ttu-id="53e43-165">Zobacz także</span><span class="sxs-lookup"><span data-stu-id="53e43-165">See also</span></span>

- [<span data-ttu-id="53e43-166">Funkcje Serwera SQL i ADO.NET</span><span class="sxs-lookup"><span data-stu-id="53e43-166">SQL Server Features and ADO.NET</span></span>](sql-server-features-and-adonet.md)
- [<span data-ttu-id="53e43-167">Omówienie ADO.NET</span><span class="sxs-lookup"><span data-stu-id="53e43-167">ADO.NET Overview</span></span>](../ado-net-overview.md)
